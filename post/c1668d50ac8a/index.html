<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><meta name="referrer" content="no-referrer"><title>开发流程记录 |  虚青海的博客 </title><meta name="author" content="虚青海"><meta name="copyright" content="虚青海"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="智慧城市开发流程记录参考模拟卷01开发片段功能的开发过程记录。 AS常用快捷键代码格式化Ctrl+Alt+L 打开源代码 选择一个字段使用快捷键可以打开字段源文件  Ctrl+B 往下一行插入换行 这种换行不需要特意在行末添加换行  shift+enter 往上一行插入换行ctrl+alt+ente"><link rel="shortcut icon" href="https://blog.xqher.cn/img/favicon.ico"><link rel="canonical" href="https://xqher.gitee.io/post/c1668d50ac8a/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="A6nBPP2YDYuQRvcTcw2G7pAWsJMtiAEsaW8bIByQbRA"/><meta name="baidu-site-verification" content="code-2JYWfn6dbU"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bd8ff323652e2c878ac481be337e605e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '开发流程记录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-08 22:45:14'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img2023.cnblogs.com/blog/1674552/202307/1674552-20230722183629733-139482028.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927211814642-994800873.png')"><nav id="nav"><span id="blog-info"><a href="/" title=" 虚青海的博客 "><span class="site-name"> 虚青海的博客 </span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">开发流程记录</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-27T13:16:44.000Z" title="发表于 2022-09-27 21:16:44">2022-09-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-08T14:45:14.000Z" title="更新于 2023-07-08 22:45:14">2023-07-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">开发记录</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>94分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="开发流程记录"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="智慧城市开发流程记录"><a href="#智慧城市开发流程记录" class="headerlink" title="智慧城市开发流程记录"></a>智慧城市开发流程记录</h2><p>参考模拟卷01开发片段功能的开发过程记录。</p>
<h3 id="AS常用快捷键"><a href="#AS常用快捷键" class="headerlink" title="AS常用快捷键"></a>AS常用快捷键</h3><h4 id="代码格式化"><a href="#代码格式化" class="headerlink" title="代码格式化"></a>代码格式化</h4><p>Ctrl+Alt+L</p>
<h4 id="打开源代码"><a href="#打开源代码" class="headerlink" title="打开源代码"></a>打开源代码</h4><blockquote>
<p>选择一个字段使用快捷键可以打开字段源文件</p>
</blockquote>
<p>Ctrl+B</p>
<h4 id="往下一行插入换行"><a href="#往下一行插入换行" class="headerlink" title="往下一行插入换行"></a>往下一行插入换行</h4><blockquote>
<p>这种换行不需要特意在行末添加换行</p>
</blockquote>
<p>shift+enter</p>
<h4 id="往上一行插入换行"><a href="#往上一行插入换行" class="headerlink" title="往上一行插入换行"></a>往上一行插入换行</h4><p>ctrl+alt+enter</p>
<h4 id="在行末-分号后-添加换行"><a href="#在行末-分号后-添加换行" class="headerlink" title="在行末(分号后)添加换行"></a>在行末(分号后)添加换行</h4><blockquote>
<p>如果分号下一行已经是空行则不会添加而是转到那一行</p>
</blockquote>
<p>ctrl+shift+enter</p>
<h4 id="方法间上下跳转"><a href="#方法间上下跳转" class="headerlink" title="方法间上下跳转"></a>方法间上下跳转</h4><p>按住alt+上下方向键</p>
<h4 id="切换当前编辑文件"><a href="#切换当前编辑文件" class="headerlink" title="切换当前编辑文件"></a>切换当前编辑文件</h4><p>按住alt+左右方向键</p>
<h4 id="字段间左右移动"><a href="#字段间左右移动" class="headerlink" title="字段间左右移动"></a>字段间左右移动</h4><p>ctrl+左右方向键</p>
<h4 id="页面上下滑动"><a href="#页面上下滑动" class="headerlink" title="页面上下滑动"></a>页面上下滑动</h4><p>ctrl+上下方向键</p>
<h4 id="复制当前行代码"><a href="#复制当前行代码" class="headerlink" title="复制当前行代码"></a>复制当前行代码</h4><p>Ctrl+D</p>
<h4 id="打开最近操作的文件"><a href="#打开最近操作的文件" class="headerlink" title="打开最近操作的文件"></a>打开最近操作的文件</h4><p>Ctrl+E</p>
<h4 id="快捷输入代码块"><a href="#快捷输入代码块" class="headerlink" title="快捷输入代码块"></a>快捷输入代码块</h4><blockquote>
<p>快捷使用一些常用代码模板，try catch等</p>
</blockquote>
<p>Ctrl+Alt+T</p>
<h4 id="查看当前类待实现接口"><a href="#查看当前类待实现接口" class="headerlink" title="查看当前类待实现接口"></a>查看当前类待实现接口</h4><p>Ctrl+I</p>
<h4 id="切换大小写"><a href="#切换大小写" class="headerlink" title="切换大小写"></a>切换大小写</h4><p>选中字段后使用<strong>Ctrl+Shift+U</strong></p>
<h4 id="快速补全代码"><a href="#快速补全代码" class="headerlink" title="快速补全代码"></a>快速补全代码</h4><p>输入自定义的代码模板或自带的代码缩写后按<strong>tab</strong>自动补全</p>
<p>如psf</p>
<p><img src="https://img2020.cnblogs.com/blog/1674552/202110/1674552-20211003101758238-971042247.png" alt="设置代码模板"></p>
<ul>
<li>ctrl+D 快速复制单行代码</li>
<li>ctrl+W 选中一个字段</li>
<li>ALT+J 选中字段后快速选择同名字段</li>
<li>ctrl+左右方向键快速跳过字段</li>
<li>shift+方向键选择字段</li>
</ul>
<h4 id="上下移动一段代码"><a href="#上下移动一段代码" class="headerlink" title="上下移动一段代码"></a>上下移动一段代码</h4><p>选中代码后按着<strong>shift+alt +上下方向键</strong>移动这段代码</p>
<h4 id="选中字段"><a href="#选中字段" class="headerlink" title="选中字段"></a>选中字段</h4><p><strong>Ctrl+W</strong>，多次使用Ctrl+W可扩大选择范围</p>
<h4 id="选中多行代码"><a href="#选中多行代码" class="headerlink" title="选中多行代码"></a>选中多行代码</h4><p>同几行内可使用鼠标中键选中</p>
<p>选中不同部分的相同代码可以先选中一个字段，然后按住<strong>Alt+J</strong>往后依次选中相同代码。</p>
<p><img src="https://img2020.cnblogs.com/blog/1674552/202110/1674552-20211031153100914-2045386928.png" alt="鼠标中键"></p>
<h4 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h4><p>选中字段或文件，点击shift + f6 快速重命名</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202210/1674552-20221004113010902-2012828718.png" alt="重命名"></p>
<h3 id="开发前配置"><a href="#开发前配置" class="headerlink" title="开发前配置"></a>开发前配置</h3><h4 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h4><p>首先新建项目</p>
<h4 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h4><p>Git使用之后再复盘</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924141133555-1908297136.png" alt="配置Git"></p>
<p>配置好Git目录后为git设置账号邮箱(用于区分提交者)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name name</span><br><span class="line">git config --global user.email email</span><br></pre></td></tr></table></figure>

<p><img src="https://img2020.cnblogs.com/blog/1674552/202110/1674552-20211030123112103-1135860346.png" alt="Git配置账号邮箱"></p>
<p>直接win+r -&gt; cmd 打开命令行设置</p>
<h4 id="导入插件"><a href="#导入插件" class="headerlink" title="导入插件"></a>导入插件</h4><p>引入开发资料中的插件</p>
<ol>
<li>Android studio  File-&gt;Settings..-&gt;Plugins –&gt;install plugin from disk..导入 GsonFormat.jar ,</li>
<li>重启 android studio .</li>
</ol>
<p><img src="https://img2020.cnblogs.com/blog/1674552/202111/1674552-20211120204316891-1445100549.png" alt="插件安装"></p>
<p>默认配置好sdk与虚拟机</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924125834064-605612439.png" alt="默认项目"></p>
<p>打开虚拟机，默认配置为sdk8.0</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924130032388-216908384.png" alt="虚拟机"></p>
<h4 id="引入依赖包"><a href="#引入依赖包" class="headerlink" title="引入依赖包"></a>引入依赖包</h4><p>引入开发使用的依赖包</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924130425135-2110560886.png" alt="可用依赖"></p>
<p>通常使用的有</p>
<p>1. </p>
<ol>
<li><p>banner 轮播图</p>
</li>
<li><p>okhttp 网络请求</p>
</li>
<li><p>MPAndroidChart 绘制图表</p>
</li>
<li><p>Gson 格式化实例数据</p>
</li>
<li><p>GsonFormatPlush 通过json生成实例的工具</p>
</li>
<li><p>glide 图片加载库</p>
<p>将需要的依赖jar，arr包放入项目下的libs文件夹后再app目录下的build.gradle中编写如下代码</p>
<p>在dependencies闭包下添加aar</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation fileTree(<span class="attr">dir:</span> <span class="string">&quot;libs&quot;</span>, <span class="attr">include:</span> [<span class="string">&quot;*.jar&quot;</span>,<span class="string">&quot;*.aar&quot;</span>])</span><br></pre></td></tr></table></figure>

<p>引入依赖</p>
<p>在android闭包下添加buildFeatures闭包并开启viewBinding开启控件绑定</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">buildFeatures&#123;</span><br><span class="line">    viewBinding=<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这里构建工具版本过高会报错，修改为<code>30.0.0</code>即可<br>   <figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buildToolsVersion <span class="string">&quot;30.0.0&quot;</span></span><br></pre></td></tr></table></figure></p>
<p>   <img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924221331279-950765053.png" alt="编写后截图"></p>
<p>引入依赖包一般引入新版本,根据api需要还应引入一些依赖包</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.google.android.material:material:1.1.0&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924135301441-1377317035.png" alt="引入的依赖包"></p>
<h4 id="配置清单文件"><a href="#配置清单文件" class="headerlink" title="配置清单文件"></a>配置清单文件</h4><p>然后配置清单文件就正式编写代码，这里需要添加上网络权限和根据要求设置</p>
<p>在manifest下与application同级处添加网络请求权限，点击label处的引用@string&#x2F;app_name,使用快捷键ctrl+b可直接打开strings.xml文件来修改相应引用文字</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果设置了目标sdk版本大于28(9.0)还需要在application下设置运行使用明文流量(http)否则只能执行https请求，但软件默认sdk是8.0(26)，使用明文请求的指令是默认为true的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">	<span class="attr">android:usesCleartextTraffic</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924140651819-937415651.png" alt="指定sdk targetSdk为26"></p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924140718919-253674777.png" alt="清单文件配置后"></p>
<p>软件名称</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924140844132-2121100254.png" alt="软件名称"></p>
<p>在主页面MainActivity添加键盘模式防止输入框顶起布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:windowSoftInputMode=&quot;adjustPan|stateHidden&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925145819628-1761780941.png" alt="清单"></p>
<h3 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h3><h4 id="编写辅助代码，布局"><a href="#编写辅助代码，布局" class="headerlink" title="编写辅助代码，布局"></a>编写辅助代码，布局</h4><p>编写功能实现前需要使用的基类，通用布局等共用代码</p>
<h5 id="布局相关"><a href="#布局相关" class="headerlink" title="布局相关"></a>布局相关</h5><blockquote>
<p>引入设计素材，基础样式，通用的布局代码，控件如toolbar等</p>
</blockquote>
<h6 id="引入设计素材"><a href="#引入设计素材" class="headerlink" title="引入设计素材"></a>引入设计素材</h6><blockquote>
<p>如常用的引导图，图标等</p>
</blockquote>
<p>这里如果没有设计素材就只能从api中找到获取轮播图的接口了</p>
<p>这里我测试了服务器没有引导页的轮播图，只好从以前的设计素材中获取</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924212848234-1157923039.png" alt="导入素材"></p>
<h6 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h6><p>编写一个通用的toolbar，此处顺便从设计素材中引入了返回图标</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?android:actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/back&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/back&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;22sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxEms</span>=<span class="string">&quot;8&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924222031616-1021630007.png" alt="代码预览"></p>
<h5 id="抽象基类-与工具类"><a href="#抽象基类-与工具类" class="headerlink" title="抽象基类 与工具类"></a>抽象基类 与工具类</h5><blockquote>
<p>开启ViewBinding后将一些控件绑定等页面常用事件封装到抽象基类如BaseActivity,BaseFragment,BaseAdapter分别是活动，碎片，适配器的基类，封装Adapter需要的ViewHolder，网络请求的OkHttps工具类以及存储常用常量的Const类</p>
</blockquote>
<h6 id="Const"><a href="#Const" class="headerlink" title="Const"></a>Const</h6><blockquote>
<p>封装需要使用的常量，如接口的服务器地址，用于初始化SP(轻量读写数据)的变量名，以及读写变量时的变量名，这里只需要读写TOKEN和判断初次登录的FIRST等变量, 顺便准备将TOKEN值存在这里使token只在登录登出时读写赋值</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Const</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SP</span> <span class="operator">=</span> <span class="string">&quot;SP&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOKEN</span> <span class="operator">=</span> <span class="string">&quot;TOKEN&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIRST</span> <span class="operator">=</span> <span class="string">&quot;FIRST&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">IP</span> <span class="operator">=</span> <span class="string">&quot;IP&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PORT</span> <span class="operator">=</span> <span class="string">&quot;PORT&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">SEARCH</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">URL</span> <span class="operator">=</span> <span class="string">&quot;http://218.7.112.123:10001&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">TOKEN_VAL</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="BaseActivity"><a href="#BaseActivity" class="headerlink" title="BaseActivity"></a>BaseActivity</h6><p>*注：代码中包含一些可以优化的部分，比赛为了快速。一般不会特意处理不严重影响的问题</p>
<p>这里使用了lambda表达式，AS4.0在输入lambda表达式后会提示设置jdk版本</p>
<p>直接设置Source 和Target的java版本为1.8就可以</p>
<p>也可以手动在app下的build.gradle为android闭包添加如下代码</p>
<p>使用静态引用是引用需要引用对象内的静态变量，使用的时候可以省去前缀</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compileOptions &#123;</span><br><span class="line">    targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220924225059569-377992980.png" alt="也可以在build.gradle一开始就设置好"></p>
<p>继承活动初始化时使用反射获取ViewBinding，设置布局，暴露初始化接口，初始化SP 按需求封装Toast， 读写SP，切换Fragment等方法 注意要暴露的方法和变量需要加上protected</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.viewbinding.ViewBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseActivity</span>&lt;T <span class="keyword">extends</span> <span class="title class_">ViewBinding</span>&gt; <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> T binding;</span><br><span class="line">    <span class="keyword">protected</span> SharedPreferences sp;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="type">ParameterizedType</span> <span class="variable">type</span> <span class="operator">=</span> (ParameterizedType)getClass().getGenericSuperclass();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class&lt;?&gt; clz = (Class&lt;?&gt;)type.getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clz.getDeclaredMethod(<span class="string">&quot;inflate&quot;</span>, LayoutInflater.class);</span><br><span class="line">            binding = (T)method.invoke(<span class="literal">null</span>, getLayoutInflater());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        setContentView(binding.getRoot());</span><br><span class="line">        sp = getSharedPreferences(Const.SP,<span class="number">0</span>);</span><br><span class="line">        init();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">jump</span><span class="params">(Class target)</span>&#123;</span><br><span class="line">        startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>,target));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">toast</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        runOnUiThread(()-&gt;Toast.makeText(BaseActivity.<span class="built_in">this</span>, msg, Toast.LENGTH_SHORT).show());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">setSp</span><span class="params">(String key, String val)</span>&#123;</span><br><span class="line">        sp.edit().putString(key, val).apply();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getSP</span><span class="params">(String key)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sp.getString(key, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">switchFragment</span><span class="params">(Fragment fragment, <span class="type">int</span> viewId)</span>&#123;</span><br><span class="line">        getSupportFragmentManager()</span><br><span class="line">                .beginTransaction()</span><br><span class="line">                .replace(viewId, fragment)</span><br><span class="line">                .commit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="BaseFragment"><a href="#BaseFragment" class="headerlink" title="BaseFragment"></a>BaseFragment</h6><p>这里也可以保留了一个Activity引用，但一般不会这么做，因为其不同于requireActivity()返回的弱引用，这属于强引用使垃圾回收GC无法回收Activity从而容易崩溃，requireActivity()是判空返回底层类的Activity，不同于当前显示活动直接持有Activity (大概)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.viewbinding.ViewBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseFragment</span>&lt;T <span class="keyword">extends</span> <span class="title class_">ViewBinding</span>&gt; <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> T binding;</span><br><span class="line">    <span class="keyword">protected</span> SharedPreferences sp;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(<span class="meta">@NonNull</span> LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="type">ParameterizedType</span> <span class="variable">type</span> <span class="operator">=</span> (ParameterizedType)getClass().getGenericSuperclass();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class&lt;?&gt; clz = (Class&lt;?&gt;)type.getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clz.getDeclaredMethod(<span class="string">&quot;inflate&quot;</span>, LayoutInflater.class);</span><br><span class="line">            binding = (T) method.invoke(<span class="literal">null</span>,getLayoutInflater());</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> binding.getRoot();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onViewCreated</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        sp = requireActivity().getSharedPreferences(Const.SP, <span class="number">0</span>);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">toast</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        requireActivity().runOnUiThread(()-&gt; Toast.makeText(requireActivity(), msg, Toast.LENGTH_SHORT).show());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">jump</span><span class="params">(Class target)</span>&#123;</span><br><span class="line">        startActivity(<span class="keyword">new</span> <span class="title class_">Intent</span>(requireActivity(),target));</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">runOnUi</span><span class="params">(Runnable run)</span>&#123;</span><br><span class="line">        requireActivity().runOnUiThread(run);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">setSp</span><span class="params">(String key, String val)</span>&#123;</span><br><span class="line">        sp.edit().putString(key, val).apply();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getSP</span><span class="params">(String key)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sp.getString(key, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="BaseViewHolder"><a href="#BaseViewHolder" class="headerlink" title="BaseViewHolder"></a>BaseViewHolder</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> androidx.viewbinding.ViewBinding;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseViewHolder</span>&lt;T, V <span class="keyword">extends</span> <span class="title class_">ViewBinding</span>&gt; <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.ViewHolder &#123;</span><br><span class="line">    <span class="keyword">protected</span> V binding;</span><br><span class="line">    <span class="keyword">protected</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseViewHolder</span><span class="params">(V binding)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(binding.getRoot());</span><br><span class="line">        <span class="built_in">this</span>.binding = binding;</span><br><span class="line">        <span class="built_in">this</span>.context = binding.getRoot().getContext();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, T bean)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="BaseAdapter"><a href="#BaseAdapter" class="headerlink" title="BaseAdapter"></a>BaseAdapter</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"><span class="keyword">import</span> androidx.viewbinding.ViewBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseAdapter</span>&lt;T, V <span class="keyword">extends</span> <span class="title class_">ViewBinding</span>&gt; <span class="keyword">extends</span> <span class="title class_">RecyclerView</span>.Adapter&lt;BaseViewHolder&gt; &#123;</span><br><span class="line">    <span class="keyword">protected</span> Context context;</span><br><span class="line">    <span class="keyword">protected</span> List&lt;T&gt; list;</span><br><span class="line">    <span class="keyword">protected</span> V binding;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseAdapter</span><span class="params">(Context context, List&lt;T&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(List&lt;T&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(list);</span><br><span class="line">        notifyDataSetChanged();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindViewHolder</span><span class="params">(<span class="meta">@NonNull</span> BaseViewHolder holder, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">        holder.refresh(position, list.get(position));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list!=<span class="literal">null</span>?list.size():<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用BaseAdapter ViewHolder 的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ItemServeBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Serve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServeAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&lt;Serve.RowsBean, ItemServeBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServeAdapter</span><span class="params">(Context context, List&lt;Serve.RowsBean&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BaseViewHolder&lt;Serve.RowsBean, ItemServeBinding&gt; onCreateViewHolder(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServeViewHolder</span>(ItemServeBinding.inflate(LayoutInflater.from(context), parent, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ServeViewHolder</span> <span class="keyword">extends</span> <span class="title class_">BaseViewHolder</span>&lt;Serve.RowsBean, ItemServeBinding&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ServeViewHolder</span><span class="params">(ItemServeBinding binding)</span>&#123;</span><br><span class="line">            <span class="built_in">super</span>(binding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, Serve.RowsBean bean)</span> &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="Callbacks"><a href="#Callbacks" class="headerlink" title="Callbacks"></a>Callbacks</h6><blockquote>
<p>一个实现Callback的抽象类，可以直接返回网络请求结果和相关实体类，因为获取class的反射代码都是一套，所以实际代码不会太多</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.jetbrains.annotations.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.Call;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Callback;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Callbacks</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Callback</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFailure</span><span class="params">(<span class="meta">@NotNull</span> Call call, <span class="meta">@NotNull</span> IOException e)</span> &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResponse</span><span class="params">(<span class="meta">@NotNull</span> Call call, <span class="meta">@NotNull</span> Response response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> response.body().string();</span><br><span class="line">        getRes(res, getBean(res));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, T bean)</span>;</span><br><span class="line">    <span class="keyword">private</span> T <span class="title function_">getBean</span><span class="params">(String json)</span>&#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ParameterizedType</span> <span class="variable">type</span> <span class="operator">=</span> (ParameterizedType)getClass().getGenericSuperclass();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Class&lt;?&gt; clz = (Class&lt;?&gt;)type.getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">            res = (T)<span class="keyword">new</span> <span class="title class_">Gson</span>().fromJson(json,clz);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="OKHttps"><a href="#OKHttps" class="headerlink" title="OKHttps"></a>OKHttps</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.MediaType;</span><br><span class="line"><span class="keyword">import</span> okhttp3.OkHttpClient;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Request;</span><br><span class="line"><span class="keyword">import</span> okhttp3.RequestBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.example.practice0924.base.Const.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OKHttps</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">OkHttpClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OkHttpClient</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">(String url, Callbacks callback)</span> &#123;</span><br><span class="line">        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>.Builder()</span><br><span class="line">                .url(URL + url)</span><br><span class="line">                .addHeader(<span class="string">&quot;Authorization&quot;</span>, TOKEN_VAL)</span><br><span class="line">                .build();</span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">post</span><span class="params">(String url, HashMap&lt;String, String&gt; map, Callbacks callback)</span> &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">json</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>(map);</span><br><span class="line"></span><br><span class="line">        <span class="type">RequestBody</span> <span class="variable">body</span> <span class="operator">=</span> RequestBody.create(json.toString(),</span><br><span class="line">                MediaType.parse(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>.Builder()</span><br><span class="line">                .url(URL + url)</span><br><span class="line">                .post(body)</span><br><span class="line">                .addHeader(<span class="string">&quot;Authorization&quot;</span>, TOKEN_VAL)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(String url, HashMap&lt;String, String&gt; map, Callbacks callback)</span> &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">json</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>(map);</span><br><span class="line"></span><br><span class="line">        <span class="type">RequestBody</span> <span class="variable">body</span> <span class="operator">=</span> RequestBody.create(json.toString(),</span><br><span class="line">                MediaType.parse(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>.Builder()</span><br><span class="line">                .url(URL + url)</span><br><span class="line">                .put(body)</span><br><span class="line">                .addHeader(<span class="string">&quot;Authorization&quot;</span>, TOKEN_VAL)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="EmptyActivity"><a href="#EmptyActivity" class="headerlink" title="EmptyActivity"></a>EmptyActivity</h6><p>用于占位给各种入口提供一个空白入口的Activity</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>跳转到EmptyActivity在intent中传入title即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityEmptyBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmptyActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityEmptyBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;title&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!TextUtils.isEmpty(title))&#123;</span><br><span class="line">            binding.toolbar.title.setText(title);</span><br><span class="line">        &#125;</span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v-&gt;finish());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>),target);</span><br><span class="line">intent.putExtra(<span class="string">&quot;title&quot;</span>,title);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>



<h5 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h5><p>为styles添加冷启动开屏样式，将默认样式的parent修改为无actionbar样式</p>
<p>修改parent后复制一份设置windowBackground为第一张引导图即可</p>
<p>主样式继承MaterialComponent 是为了方便个人中心的按钮使用边框属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;SplashTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowBackground&quot;</span>&gt;</span>@drawable/introa<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorAccent&quot;</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="引导页"><a href="#引导页" class="headerlink" title="引导页"></a>引导页</h4><p>新建引导页活动勾选启动类</p>
<h5 id="清单"><a href="#清单" class="headerlink" title="清单"></a>清单</h5><p>在清单内将启动类设置为SplashActivty，设置样式为SplashTheme</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925004926450-247442083.png" alt="修改清单"></p>
<h5 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h5><p>接着编写布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.youth.banner.Banner</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/banner&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;进入主页&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;72dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/enter&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;网络设置&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/setting&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><p>然后编写SplashActivity代码</p>
<p>逻辑为先继承BaseActivity，</p>
<p>获取sp存储token</p>
<p>判断sp是否初次登录</p>
<p>决定是显示引导页还是直接跳转主页</p>
<p>注意跳转后要关闭这个活动，并且初次登录值的修改和url的拼接将在主页执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.LinearLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.MainActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.R;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivitySplashBinding;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.adapter.BannerImageAdapter;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.holder.BannerImageHolder;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.indicator.CircleIndicator;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.listener.OnPageChangeListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.example.practice0924.base.Const.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SplashActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivitySplashBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        TOKEN_VAL = getSP(TOKEN);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getSP(FIRST).isEmpty()) &#123;</span><br><span class="line"></span><br><span class="line">            List&lt;Integer&gt; imgs = Arrays.asList(</span><br><span class="line">                    R.drawable.introa,</span><br><span class="line">                    R.drawable.introb,</span><br><span class="line">                    R.drawable.introc,</span><br><span class="line">                    R.drawable.introd,</span><br><span class="line">                    R.drawable.introe</span><br><span class="line">            );</span><br><span class="line">            binding.banner.setAdapter(<span class="keyword">new</span> <span class="title class_">BannerImageAdapter</span>&lt;Integer&gt;(imgs) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindView</span><span class="params">(BannerImageHolder bannerImageHolder, Integer integer, <span class="type">int</span> i, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line">                    Glide.with(SplashActivity.<span class="built_in">this</span>).load(integer).into(bannerImageHolder.imageView);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="literal">false</span>)</span><br><span class="line">                    .setIndicator(<span class="keyword">new</span> <span class="title class_">CircleIndicator</span>(<span class="built_in">this</span>))</span><br><span class="line">                    .addOnPageChangeListener(<span class="keyword">new</span> <span class="title class_">OnPageChangeListener</span>() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrolled</span><span class="params">(<span class="type">int</span> i, <span class="type">float</span> v, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrollStateChanged</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (i == imgs.size() - <span class="number">1</span>) &#123;</span><br><span class="line">                                binding.enter.setVisibility(View.VISIBLE);</span><br><span class="line">                                binding.setting.setVisibility(View.VISIBLE);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                binding.enter.setVisibility(View.GONE);</span><br><span class="line">                                binding.setting.setVisibility(View.GONE);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">            binding.enter.setOnClickListener(v -&gt; &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">h</span> <span class="operator">=</span> getSP(IP);</span><br><span class="line">                <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> getSP(PORT);</span><br><span class="line">                <span class="keyword">if</span> (!TextUtils.isEmpty(h.trim()) &amp;&amp; !TextUtils.isEmpty(p.trim())) &#123;</span><br><span class="line">                    jump(MainActivity.class);</span><br><span class="line">                    finish();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未设置网络&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            binding.setting.setOnClickListener(v -&gt; &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">LinearLayout</span> <span class="variable">layout</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinearLayout</span>(<span class="built_in">this</span>);</span><br><span class="line">                <span class="type">EditText</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EditText</span>(<span class="built_in">this</span>);</span><br><span class="line">                <span class="type">EditText</span> <span class="variable">port</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EditText</span>(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">                host.setHint(<span class="string">&quot;输入主机地址如192.168.1.1&quot;</span>);</span><br><span class="line">                port.setHint(<span class="string">&quot;输入端口号如10001&quot;</span>);</span><br><span class="line"></span><br><span class="line">                host.setText(getSP(IP));</span><br><span class="line">                port.setText(getSP(PORT));</span><br><span class="line"></span><br><span class="line">                layout.setOrientation(LinearLayout.VERTICAL);</span><br><span class="line">                layout.addView(host);</span><br><span class="line">                layout.addView(port);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>)</span><br><span class="line">                        .setTitle(<span class="string">&quot;网络设置&quot;</span>)</span><br><span class="line">                        .setView(layout)</span><br><span class="line">                        .setNegativeButton(<span class="string">&quot;关闭&quot;</span>, <span class="literal">null</span>)</span><br><span class="line">                        .setPositiveButton(<span class="string">&quot;保存&quot;</span>, (dialog, which) -&gt; &#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">h</span> <span class="operator">=</span> host.getText().toString();</span><br><span class="line">                            <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> port.getText().toString();</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (!TextUtils.isEmpty(h.trim()) &amp;&amp; !TextUtils.isEmpty(p.trim())) &#123;</span><br><span class="line">                                setSp(IP, h);</span><br><span class="line">                                setSp(PORT, p);</span><br><span class="line">                                toast(<span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                toast(<span class="string">&quot;输入内容为空&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                        .create()</span><br><span class="line">                        .show();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            jump(MainActivity.class);</span><br><span class="line">            finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="主页容器Activity"><a href="#主页容器Activity" class="headerlink" title="主页容器Activity"></a>主页容器Activity</h4><h5 id="布局-1"><a href="#布局-1" class="headerlink" title="布局"></a>布局</h5><p>先编写布局代码</p>
<p>简单的线性布局用于承载用于显示的碎片&#x2F;片段</p>
<p>这里直接将显示的底部item用xml的方式写了进去</p>
<p>注意tabItem设置id的话ViewBinding会报错</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/frameLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tabLayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabMode</span>=<span class="string">&quot;auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/home&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;首页&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/allserve&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;全部服务&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/restrict&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;智慧党建&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/news&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;新闻&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/per&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;个人中心&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.tabs.TabLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后编写java 界面，先新建几个空Fragment(因为不需要注册到清单中，可以新建一个Fragment之后复制粘贴几个，注意xml和java对应)</p>
<h5 id="初始化Fragment"><a href="#初始化Fragment" class="headerlink" title="初始化Fragment"></a>初始化Fragment</h5><p>新建相应布局后直接新建Fragment类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.FragmentHomeBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeFragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;FragmentHomeBinding&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><p>在Activity内新建Framgnet的实例设置为当前FrameLayout显示，tablayout添加点击事件切换Fragment</p>
<p>暴露一个切换到全部服务的方法给页面中间服务列表的更多服务使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityMainBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.HomeFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.NewsFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.PerFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.RestrictFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.ServeFragment;</span><br><span class="line"><span class="keyword">import</span> com.google.android.material.tabs.TabLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.example.practice0924.base.Const.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityMainBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        URL = String.format(<span class="string">&quot;http://%s:%s&quot;</span>, getSP(IP), getSP(PORT));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getSP(FIRST).isEmpty()) &#123;</span><br><span class="line">            setSp(FIRST,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;首页&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">frameLayoutId</span> <span class="operator">=</span> binding.frameLayout.getId();</span><br><span class="line">        switchFragment(<span class="keyword">new</span> <span class="title class_">HomeFragment</span>(), frameLayoutId);</span><br><span class="line"></span><br><span class="line">        binding.tabLayout.addOnTabSelectedListener(<span class="keyword">new</span> <span class="title class_">TabLayout</span>.OnTabSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabSelected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> tab.getText().toString();</span><br><span class="line">                <span class="keyword">switch</span>(title)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;首页&quot;</span>:</span><br><span class="line">                        switchFragment(<span class="keyword">new</span> <span class="title class_">HomeFragment</span>(), frameLayoutId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;全部服务&quot;</span>:</span><br><span class="line">                        switchFragment(<span class="keyword">new</span> <span class="title class_">ServeFragment</span>(), frameLayoutId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;智慧党建&quot;</span>:</span><br><span class="line">                        switchFragment(<span class="keyword">new</span> <span class="title class_">RestrictFragment</span>(), frameLayoutId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;新闻&quot;</span>:</span><br><span class="line">                        switchFragment(<span class="keyword">new</span> <span class="title class_">NewsFragment</span>(), frameLayoutId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;个人中心&quot;</span>:</span><br><span class="line">                        switchFragment(<span class="keyword">new</span> <span class="title class_">PerFragment</span>(), frameLayoutId);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                binding.toolbar.title.setText(title);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabUnselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabReselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moreServe</span><span class="params">()</span>&#123;</span><br><span class="line">        TabLayout.<span class="type">Tab</span> <span class="variable">tab</span> <span class="operator">=</span> binding.tabLayout.getTabAt(<span class="number">1</span>);</span><br><span class="line">        tab.select();</span><br><span class="line">        switchFragment(<span class="keyword">new</span> <span class="title class_">ServeFragment</span>(), binding.frameLayout.getId());</span><br><span class="line">        binding.toolbar.title.setText(tab.getText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="主页Fragment"><a href="#主页Fragment" class="headerlink" title="主页Fragment"></a>主页Fragment</h4><h5 id="布局-2"><a href="#布局-2" class="headerlink" title="布局"></a>布局</h5><p>这里开始编写主页页面</p>
<p>从上至下一个搜索框，一个轮播图，一个服务列表，一个热门新闻列表，一个滑动的新闻分类tabLayout控制最底下的新闻列表</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.core.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.cardview.widget.CardView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;24dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">androidx.appcompat.widget.SearchView</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/searchView&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:queryHint</span>=<span class="string">&quot;新闻搜索&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">androidx.cardview.widget.CardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.cardview.widget.CardView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">com.youth.banner.Banner</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/banner&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">androidx.cardview.widget.CardView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;服务入口&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/serveEnterRv&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;热门主题&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/hotTopicRv&quot;</span>/&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabLayout</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:tabMode</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/newsTypeTl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/newsRv&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.core.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h5><p>需要实现新闻搜索(将输入内容传到另一个Activity显示匹配搜索结果的列表)</p>
<p>将获取的主页轮播图资源设置到轮播图，需要测试接口生成相应pojo类，轮播图点击事件需要相应的设置新闻详情页面可跳转</p>
<p>获取全部服务，设置相应的服务列表item，定义相应适配器</p>
<p>获取热门主题，设置相应新闻列表item，定义相应适配器</p>
<p>获取新闻分类，添加到分类tabLayout</p>
<p>获取默认分类的新闻，设置相应新闻列表item，定义相应适配器</p>
<h6 id="新闻搜索"><a href="#新闻搜索" class="headerlink" title="新闻搜索"></a>新闻搜索</h6><p>这里先不管新闻搜索列表页面具体实现，只生成一个空Activity用于跳转</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>默认的空界面布局</p>
<p>新建完Activity记得添加到清单中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.page.NewsSearchActivity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.page.NewsDetailActivity&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925142428683-1564469206.png" alt="清单"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityNewsSearchBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsSearchActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityNewsSearchBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(String.format(<span class="string">&quot;%s搜索结果&quot;</span>, Const.SEARCH));</span><br><span class="line"></span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v-&gt;finish());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首页Fragment实现搜索</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">binding.searchView.setOnQueryTextListener(<span class="keyword">new</span> <span class="title class_">SearchView</span>.OnQueryTextListener() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onQueryTextSubmit</span><span class="params">(String query)</span> &#123;</span><br><span class="line">               Const.SEARCH = query;</span><br><span class="line">               jump(NewsSearchActivity.class);</span><br><span class="line">               binding.searchView.setIconified(<span class="literal">true</span>);</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onQueryTextChange</span><span class="params">(String newText)</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h6><p>先测试轮播图接口</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925140921523-881093499.png" alt="测试接口"></p>
<p>将返回json复制，使用alt+s 将json生成pojo类的字段和方法</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925141105816-1649695370.png" alt="pojo"></p>
<p>跟上一步一样生成一个新闻详情页</p>
<p>调用get请求设置banner图片和点击事件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">OKHttps.get(<span class="string">&quot;/prod-api/api/rotation/list?type=2&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;HomeBanner&gt;() &#123;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, HomeBanner bean)</span> &#123;</span><br><span class="line">               runOnUi(() -&gt; &#123;</span><br><span class="line">                   List&lt;HomeBanner.RowsBean&gt; beans = bean.getRows();</span><br><span class="line">                   binding.banner.setAdapter(<span class="keyword">new</span> <span class="title class_">BannerImageAdapter</span>&lt;HomeBanner.RowsBean&gt;(beans) &#123;</span><br><span class="line">                       <span class="meta">@Override</span></span><br><span class="line">                       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindView</span><span class="params">(BannerImageHolder bannerImageHolder,</span></span><br><span class="line"><span class="params">                                              HomeBanner.RowsBean rowsBean, <span class="type">int</span> i, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line"></span><br><span class="line">                           Glide.with(requireActivity()).load(Const.URL + rowsBean.getAdvImg())</span><br><span class="line">                                   .into(bannerImageHolder.imageView);</span><br><span class="line"></span><br><span class="line">                           bannerImageHolder.imageView.setOnClickListener(v -&gt; &#123;</span><br><span class="line"></span><br><span class="line">                               <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(requireActivity(), NewsDetailActivity.class);</span><br><span class="line">                               intent.putExtra(<span class="string">&quot;id&quot;</span>, rowsBean.getTargetId() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">                               startActivity(intent);</span><br><span class="line"></span><br><span class="line">                           &#125;);</span><br><span class="line"></span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;);</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="服务列表"><a href="#服务列表" class="headerlink" title="服务列表"></a>服务列表</h6><p>引入需要显示自定义的更多服务图标</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220925150103317-2123196706.png" alt="更多服务图标引入"></p>
<p>使用RecyclerView需要定义显示的item布局，布局管理器，适配器和相应的bean pojo类</p>
<p>先定义item布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/more_serve&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/icon&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;icon&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>测试接口生成pojo，编写适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.MainActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.R;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.EmptyActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ItemServeBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.NewsDetailActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Serve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServeAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&lt;Serve.RowsBean, ItemServeBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServeAdapter</span><span class="params">(Context context, List&lt;Serve.RowsBean&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BaseViewHolder&lt;Serve.RowsBean, ItemServeBinding&gt; onCreateViewHolder(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServeViewHolder</span>(ItemServeBinding.inflate(LayoutInflater.from(context), parent, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ServeViewHolder</span> <span class="keyword">extends</span> <span class="title class_">BaseViewHolder</span>&lt;Serve.RowsBean, ItemServeBinding&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ServeViewHolder</span><span class="params">(ItemServeBinding binding)</span>&#123;</span><br><span class="line">            <span class="built_in">super</span>(binding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, Serve.RowsBean bean)</span> &#123;</span><br><span class="line">            binding.title.setText(bean.getServiceName());</span><br><span class="line">            <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> bean.getServiceName();</span><br><span class="line">            <span class="keyword">if</span>(title.equals(<span class="string">&quot;更多服务&quot;</span>))&#123;</span><br><span class="line">                binding.icon.setImageResource(R.drawable.more_serve);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                Glide.with(context).load(Const.URL+bean.getImgUrl()).into(binding.icon);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            binding.getRoot().setOnClickListener(v-&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span>(title.equals(<span class="string">&quot;更多服务&quot;</span>))&#123;</span><br><span class="line">                    ((MainActivity)context).moreServe();</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, EmptyActivity.class);</span><br><span class="line">                    intent.putExtra(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">                    context.startActivity(intent);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在fragment内实例化适配器和布局管理器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServeAdapter</span> <span class="variable">serveAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">       binding.serveEnterRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">5</span>));</span><br><span class="line">       binding.serveEnterRv.setAdapter(serveAdapter);</span><br><span class="line">       OKHttps.get(<span class="string">&quot;/prod-api/api/service/list?pageNum=1&amp;pageSize=9&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Serve&gt;() &#123;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Serve bean)</span> &#123;</span><br><span class="line">               List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bean.getRows());</span><br><span class="line"></span><br><span class="line">               Serve.<span class="type">RowsBean</span> <span class="variable">moreServe</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Serve</span>.RowsBean();</span><br><span class="line">               moreServe.setServiceName(<span class="string">&quot;更多服务&quot;</span>);</span><br><span class="line">               temps.add(moreServe);</span><br><span class="line"></span><br><span class="line">               runOnUi(() -&gt; serveAdapter.setData(temps));</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="热门主题"><a href="#热门主题" class="headerlink" title="热门主题"></a>热门主题</h6><p>先编写item布局然后生成pojo实现适配器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.cardview.widget.CardView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/cover&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center_horizontal&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:ellipsize</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;title&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.cardview.widget.CardView</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Adapter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ItemHotTopicBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.NewsDetailActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.News;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopicAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&lt;News.RowsBean, ItemHotTopicBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TopicAdapter</span><span class="params">(Context context, List&lt;News.RowsBean&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BaseViewHolder&lt;News.RowsBean, ItemHotTopicBinding&gt; onCreateViewHolder(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TopicViewHolder</span>(ItemHotTopicBinding.inflate(LayoutInflater.from(context), parent, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">TopicViewHolder</span> <span class="keyword">extends</span> <span class="title class_">BaseViewHolder</span>&lt;News.RowsBean, ItemHotTopicBinding&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">TopicViewHolder</span><span class="params">(ItemHotTopicBinding binding)</span>&#123;</span><br><span class="line">            <span class="built_in">super</span>(binding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, News.RowsBean bean)</span> &#123;</span><br><span class="line">            binding.title.setText(bean.getTitle());</span><br><span class="line">            Glide.with(context).load(Const.URL+bean.getCover()).into(binding.cover);</span><br><span class="line">            binding.getRoot().setOnClickListener(v-&gt;&#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, NewsDetailActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;id&quot;</span>, bean.getId()+<span class="string">&quot;&quot;</span>);</span><br><span class="line">                context.startActivity(intent);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>fragment获取新闻热点列表，设置适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TopicAdapter</span> <span class="variable">topicAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TopicAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">       binding.hotTopicRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">2</span>));</span><br><span class="line">       binding.hotTopicRv.setAdapter(topicAdapter);</span><br><span class="line"></span><br><span class="line">       OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?hot=Y&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;() &#123;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">               runOnUi(() -&gt; topicAdapter.setData(bean.getRows()));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="新闻分类和列表"><a href="#新闻分类和列表" class="headerlink" title="新闻分类和列表"></a>新闻分类和列表</h6><p>生成分类pojo，获取后添加到TabLayout中，将id设置为tab的tag方便点击时获取tab的id</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NewsAdapter</span> <span class="variable">newsAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">       binding.newsRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(requireActivity(), DividerItemDecoration.VERTICAL));</span><br><span class="line">       binding.newsRv.setLayoutManager(</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(requireActivity(), RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">       binding.newsRv.setAdapter(newsAdapter);</span><br><span class="line">       OKHttps.get(<span class="string">&quot;/prod-api/press/category/list&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;NewsType&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, NewsType bean)</span> &#123;</span><br><span class="line">               runOnUi(() -&gt; &#123;</span><br><span class="line">                   <span class="keyword">for</span> (NewsType.DataBean data : bean.getData()) &#123;</span><br><span class="line">                       binding.newsTypeTl.addTab(binding.newsTypeTl.newTab()</span><br><span class="line">                               .setText(data.getName()).setTag(data.getId()));</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>



<p>复用旧的新闻pojo，编写新闻列表item布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;2dp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cover&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;120dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentStart</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;128dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/desc&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxLines</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#222&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;36dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;128dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/status&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;128dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;2022-09-24&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;end&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBottom</span>=<span class="string">&quot;@id/cover&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.text.Html;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ItemNewsBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.page.NewsDetailActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.News;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&lt;News.RowsBean, ItemNewsBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NewsAdapter</span><span class="params">(Context context, List&lt;News.RowsBean&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BaseViewHolder&lt;News.RowsBean, ItemNewsBinding&gt; onCreateViewHolder(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NewsViewHolder</span>(ItemNewsBinding.inflate(LayoutInflater.from(context), parent, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">NewsViewHolder</span> <span class="keyword">extends</span> <span class="title class_">BaseViewHolder</span>&lt;News.RowsBean, ItemNewsBinding&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NewsViewHolder</span><span class="params">(ItemNewsBinding binding)</span>&#123;</span><br><span class="line">            <span class="built_in">super</span>(binding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, News.RowsBean bean)</span> &#123;</span><br><span class="line">            binding.title.setText(bean.getTitle());</span><br><span class="line">            Glide.with(context).load(Const.URL+bean.getCover()).into(binding.cover);</span><br><span class="line">            binding.desc.setText(Html.fromHtml(bean.getContent(),<span class="number">0</span>));</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> bean.getCommentNum();</span><br><span class="line"></span><br><span class="line">            binding.status.setText(String.format(<span class="string">&quot;评论总数:%d    %s&quot;</span>,obj==<span class="literal">null</span>?<span class="number">0</span>:Integer.parseInt(obj.toString()), bean.getCreateTime()));</span><br><span class="line">            binding.getRoot().setOnClickListener(v-&gt;&#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, NewsDetailActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;id&quot;</span>, bean.getId()+<span class="string">&quot;&quot;</span>);</span><br><span class="line">                context.startActivity(intent);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>fragment内设置适配器，主页代码编写完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">NewsAdapter</span> <span class="variable">newsAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">binding.newsRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(requireActivity(), DividerItemDecoration.VERTICAL));</span><br><span class="line">binding.newsRv.setLayoutManager(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(requireActivity(), RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">binding.newsRv.setAdapter(newsAdapter);</span><br><span class="line"></span><br><span class="line">binding.newsTypeTl.addOnTabSelectedListener(<span class="keyword">new</span> <span class="title class_">TabLayout</span>.OnTabSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabSelected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line">                OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?type=&quot;</span>+tab.getTag(), <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;()&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">                        runOnUi(()-&gt;newsAdapter.setData(bean.getRows()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabUnselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabReselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>



<h6 id="主页Fragment-全部代码"><a href="#主页Fragment-全部代码" class="headerlink" title="主页Fragment 全部代码"></a>主页Fragment 全部代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.SearchView;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.DividerItemDecoration;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.GridLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.NewsAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.ServeAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.TopicAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.FragmentHomeBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.HomeBanner;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.News;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.NewsType;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Serve;</span><br><span class="line"><span class="keyword">import</span> com.google.android.material.tabs.TabLayout;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.adapter.BannerImageAdapter;</span><br><span class="line"><span class="keyword">import</span> com.youth.banner.holder.BannerImageHolder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.OkHttp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeFragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;FragmentHomeBinding&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        binding.searchView.setOnQueryTextListener(<span class="keyword">new</span> <span class="title class_">SearchView</span>.OnQueryTextListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onQueryTextSubmit</span><span class="params">(String query)</span> &#123;</span><br><span class="line">                Const.SEARCH = query;</span><br><span class="line">                jump(NewsSearchActivity.class);</span><br><span class="line"><span class="comment">//                防止直接enter搜索时触发两次，会关闭icon</span></span><br><span class="line">                binding.searchView.setIconified(<span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onQueryTextChange</span><span class="params">(String newText)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/api/rotation/list?type=2&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;HomeBanner&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, HomeBanner bean)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(isAdded())&#123;</span><br><span class="line">                    <span class="comment">// 避免快速切换fragment报错</span></span><br><span class="line">                    runOnUi(() -&gt; &#123;</span><br><span class="line">                        List&lt;HomeBanner.RowsBean&gt; beans = bean.getRows();</span><br><span class="line">                        binding.banner.setAdapter(<span class="keyword">new</span> <span class="title class_">BannerImageAdapter</span>&lt;HomeBanner.RowsBean&gt;(beans) &#123;</span><br><span class="line">                            <span class="meta">@Override</span></span><br><span class="line">                            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBindView</span><span class="params">(BannerImageHolder bannerImageHolder,</span></span><br><span class="line"><span class="params">                                                   HomeBanner.RowsBean rowsBean, <span class="type">int</span> i, <span class="type">int</span> i1)</span> &#123;</span><br><span class="line"></span><br><span class="line">                                Glide.with(requireActivity()).load(Const.URL + rowsBean.getAdvImg())</span><br><span class="line">                                        .into(bannerImageHolder.imageView);</span><br><span class="line"></span><br><span class="line">                                bannerImageHolder.imageView.setOnClickListener(v -&gt; &#123;</span><br><span class="line"></span><br><span class="line">                                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(requireActivity(), NewsDetailActivity.class);</span><br><span class="line">                                    intent.putExtra(<span class="string">&quot;id&quot;</span>, rowsBean.getTargetId() + <span class="string">&quot;&quot;</span>);</span><br><span class="line">                                    startActivity(intent);</span><br><span class="line"></span><br><span class="line">                                &#125;);</span><br><span class="line"></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">ServeAdapter</span> <span class="variable">serveAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        binding.serveEnterRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">5</span>));</span><br><span class="line">        binding.serveEnterRv.setAdapter(serveAdapter);</span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/api/service/list?pageNum=1&amp;pageSize=9&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Serve&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Serve bean)</span> &#123;</span><br><span class="line">                List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bean.getRows());</span><br><span class="line"></span><br><span class="line">                Serve.<span class="type">RowsBean</span> <span class="variable">moreServe</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Serve</span>.RowsBean();</span><br><span class="line">                moreServe.setServiceName(<span class="string">&quot;更多服务&quot;</span>);</span><br><span class="line">                temps.add(moreServe);</span><br><span class="line"></span><br><span class="line">                runOnUi(() -&gt; serveAdapter.setData(temps));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">TopicAdapter</span> <span class="variable">topicAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TopicAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">        binding.hotTopicRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">2</span>));</span><br><span class="line">        binding.hotTopicRv.setAdapter(topicAdapter);</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?hot=Y&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">                runOnUi(() -&gt; topicAdapter.setData(bean.getRows()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">NewsAdapter</span> <span class="variable">newsAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">        binding.newsRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(requireActivity(), DividerItemDecoration.VERTICAL));</span><br><span class="line">        binding.newsRv.setLayoutManager(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(requireActivity(), RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">        binding.newsRv.setAdapter(newsAdapter);</span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/press/category/list&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;NewsType&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, NewsType bean)</span> &#123;</span><br><span class="line">                runOnUi(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">for</span> (NewsType.DataBean data : bean.getData()) &#123;</span><br><span class="line">                        binding.newsTypeTl.addTab(binding.newsTypeTl.newTab()</span><br><span class="line">                                .setText(data.getName()).setTag(data.getId()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.newsTypeTl.addOnTabSelectedListener(<span class="keyword">new</span> <span class="title class_">TabLayout</span>.OnTabSelectedListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabSelected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line">                OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?type=&quot;</span>+tab.getTag(), <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;()&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">                        runOnUi(()-&gt;newsAdapter.setData(bean.getRows()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabUnselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTabReselected</span><span class="params">(TabLayout.Tab tab)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="新闻搜索完善"><a href="#新闻搜索完善" class="headerlink" title="新闻搜索完善"></a>新闻搜索完善</h6><p>拥有新闻列表item和pojo类之后</p>
<p>在搜索Activity里获取传入搜索标题，获取新闻列表后进行比对返回结果列表复用列表适配器显示搜索结果</p>
<p>先在布局里加一个RecyclerView</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/newsRv&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>直接先获取一个所有新闻列表，然后返回包含搜索文字的列表更新适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.DividerItemDecoration;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.NewsAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityNewsSearchBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.News;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsSearchActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityNewsSearchBinding&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;News.RowsBean&gt; news = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(String.format(<span class="string">&quot;‘%s’搜索结果&quot;</span>, Const.SEARCH));</span><br><span class="line"></span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v-&gt;finish());</span><br><span class="line"></span><br><span class="line">        <span class="type">NewsAdapter</span> <span class="variable">newsAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(<span class="built_in">this</span>, <span class="literal">null</span>);</span><br><span class="line">        binding.newsRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(<span class="built_in">this</span>, DividerItemDecoration.VERTICAL));</span><br><span class="line">        binding.newsRv.setLayoutManager(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(<span class="built_in">this</span>, RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">        binding.newsRv.setAdapter(newsAdapter);</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/press/press/list&quot;</span>,<span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">                runOnUiThread(()-&gt; &#123;</span><br><span class="line">                    news = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bean.getRows());</span><br><span class="line">                    List&lt;News.RowsBean&gt; search = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    <span class="keyword">for</span>(News.RowsBean row:news)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(row.getTitle().contains(Const.SEARCH))&#123;</span><br><span class="line">                            search.add(row);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    newsAdapter.setData(search);</span><br><span class="line">                    <span class="keyword">if</span>(search.size()==<span class="number">0</span>) toast(<span class="string">&quot;搜索结果为空&quot;</span>);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里新闻详情可以顺手补完新闻fragment，fragment的实现会相对简单</p>
<h4 id="新闻Fragment"><a href="#新闻Fragment" class="headerlink" title="新闻Fragment"></a>新闻Fragment</h4><h5 id="布局-3"><a href="#布局-3" class="headerlink" title="布局"></a>布局</h5><p>就是主页面底部一个tablayout+rv的形式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabMode</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/newsTypeTl&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/newsRv&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>新闻详情比较麻烦，<del>用上了webview显示内容</del>，然后加上推荐新闻的rv，底部发表评论，以及底部查看评论列表</p>
<blockquote>
<p>webView加载一个图片比较多的新闻时报了oom错误，换一个加载方式，但是另一个方式直接全部加载不了图片</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.core.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;?actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;56dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/cover&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/content&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;推荐新闻&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/recommendRv&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;评论&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;17sp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/commentRv&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.core.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;56dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/comment_et&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">&quot;如何评价...&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:focusable</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;7&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/comment_bt&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;评论&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h5><p>因为显示的状态文字不同，要求观看数和点赞数。这里基于复用的原则，直接给NewsAdapter加上一个type变量用于指明显示的状态文字</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">status</span> <span class="operator">=</span> String.format(<span class="string">&quot;评论总数:%d    %s&quot;</span>, obj == <span class="literal">null</span> ? <span class="number">0</span> : Integer.parseInt(obj.toString()), bean.getCreateTime());</span><br><span class="line">            <span class="keyword">if</span> (type != <span class="number">0</span>) &#123;</span><br><span class="line">                status = String.format(<span class="string">&quot;👁:%d 👍:%d    %s&quot;</span>, bean.getReadNum(), bean.getLikeNum(), bean.getCreateTime());</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220926102126151-631172607.png" alt="直接复制主页新闻的代码即可" style="zoom:50%;" />

<h6 id="新闻显示"><a href="#新闻显示" class="headerlink" title="新闻显示"></a>新闻显示</h6><p>先测试接口生成新闻详情pojo，然后在NewsDetail.Activity内获取传入的id，get请求获取新闻详情bean</p>
<p><del>加载内容到webView时还要注意设置url给内容中的图片链接</del></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        get(<span class="string">&quot;/prod-api/press/press/&quot;</span> + id, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;NewsDetail&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, NewsDetail bean)</span> &#123;</span><br><span class="line">                NewsDetail.<span class="type">DataBean</span> <span class="variable">data</span> <span class="operator">=</span> bean.getData();</span><br><span class="line">                runOnUiThread(() -&gt; &#123;</span><br><span class="line">                    binding.toolbar.title.setText(data.getTitle());</span><br><span class="line">                    binding.content.setText(Html.fromHtml(data.getContent(), <span class="number">0</span>));</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="新闻推荐"><a href="#新闻推荐" class="headerlink" title="新闻推荐"></a>新闻推荐</h6><p>复用改改参数就行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NewsAdapter</span> <span class="variable">rcAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(NewsDetailActivity.<span class="built_in">this</span>, <span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">       binding.recommendRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(NewsDetailActivity.<span class="built_in">this</span>, DividerItemDecoration.VERTICAL));</span><br><span class="line">       binding.recommendRv.setLayoutManager(</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(NewsDetailActivity.<span class="built_in">this</span>, RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">       binding.recommendRv.setAdapter(rcAdapter);</span><br><span class="line">       OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?top=Y&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">               runOnUiThread(() -&gt; rcAdapter.setData(bean.getRows()));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="评论列表"><a href="#评论列表" class="headerlink" title="评论列表"></a>评论列表</h6><blockquote>
<p>服务器接口没写好，搁置了</p>
</blockquote>
<h6 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h6><p>因为评论接口看不了，这里干脆不将评论内容post上去了，直接toast敷衍一下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">binding.commentBt.setOnClickListener(v-&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span>(!TextUtils.isEmpty(Const.TOKEN_VAL.trim()))&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">inp</span> <span class="operator">=</span> binding.commentEt.getText().toString().trim();</span><br><span class="line">        <span class="keyword">if</span>(!TextUtils.isEmpty(inp))&#123;</span><br><span class="line">            toast(<span class="string">&quot;评论成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            toast(<span class="string">&quot;输入为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h6 id="完整详情页代码"><a href="#完整详情页代码" class="headerlink" title="完整详情页代码"></a>完整详情页代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.Html;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.DividerItemDecoration;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.NewsAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityNewsDeatilBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.News;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.NewsDetail;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NewsDetailActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityNewsDeatilBinding&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;新闻详情&quot;</span>);</span><br><span class="line"></span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v -&gt; finish());</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> getIntent().getStringExtra(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/press/press/&quot;</span> + id, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;NewsDetail&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, NewsDetail bean)</span> &#123;</span><br><span class="line">                NewsDetail.<span class="type">DataBean</span> <span class="variable">data</span> <span class="operator">=</span> bean.getData();</span><br><span class="line">                runOnUiThread(() -&gt; &#123;</span><br><span class="line">                    binding.toolbar.title.setText(data.getTitle());</span><br><span class="line">                    binding.content.setText(Html.fromHtml(data.getContent().trim(), <span class="number">0</span>));</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">NewsAdapter</span> <span class="variable">rcAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NewsAdapter</span>(NewsDetailActivity.<span class="built_in">this</span>, <span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">        binding.recommendRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(NewsDetailActivity.<span class="built_in">this</span>, DividerItemDecoration.VERTICAL));</span><br><span class="line">        binding.recommendRv.setLayoutManager(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(NewsDetailActivity.<span class="built_in">this</span>, RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">        binding.recommendRv.setAdapter(rcAdapter);</span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/press/press/list?top=Y&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;News&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, News bean)</span> &#123;</span><br><span class="line">                runOnUiThread(() -&gt; rcAdapter.setData(bean.getRows()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.commentBt.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(!TextUtils.isEmpty(Const.TOKEN_VAL.trim()))&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">inp</span> <span class="operator">=</span> binding.commentEt.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span>(!TextUtils.isEmpty(inp))&#123;</span><br><span class="line">                    toast(<span class="string">&quot;评论成功&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    toast(<span class="string">&quot;输入为空&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="全部服务Fragment"><a href="#全部服务Fragment" class="headerlink" title="全部服务Fragment"></a>全部服务Fragment</h4><h5 id="布局-4"><a href="#布局-4" class="headerlink" title="布局"></a>布局</h5><p>这个主要麻烦在要做一个单选RV</p>
<p>这个搜索框比用SearchView方便，后续再写主页搜索应该会用这种形式来减少记忆负担</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/selectorRv&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/searchEt&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawableLeft</span>=<span class="string">&quot;@drawable/ic_search&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;服务搜索&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;50dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.recyclerview.widget.RecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/serveRv&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h5><p>测试服务分类接口生成pojo，在rowsBean 添加一个布尔值标识被点击</p>
<p>emm…新版好像没有服务分类接口，那简单设置成存到HashMap嵌套List根据serveType存储即可</p>
<p>首先在Serve pojo类添加isChecked 和区分服务的serviceCategory</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> isChecked;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isChecked</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> isChecked;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setChecked</span><span class="params">(<span class="type">boolean</span> checked)</span> &#123;</span><br><span class="line">    isChecked = checked;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里item binding直接新建一个包含一个Tv的布局</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#fff&quot;</span></span><br><span class="line">    &gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;全部服务&quot;</span></span><br><span class="line">        android:id=<span class="string">&quot;@+id/title&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;18sp&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;4dp&quot;</span></span><br><span class="line">        android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>



<h6 id="单选适配器实现"><a href="#单选适配器实现" class="headerlink" title="单选适配器实现"></a>单选适配器实现</h6><p>然后新建适配器，</p>
<p>关键是暴露一个表示上一个点击item坐标的last 整型，一个为了省事用于回调点击事件的onclick runnable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLast</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Runnable</span> <span class="variable">onClick</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnClick</span><span class="params">(Runnable onClick)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.onClick = onClick;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后通过Serve中新建的checked变量判断是否更改背景色，在点击时进行last坐标的更新，更改上一次点击的item和当前item</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> binding.getRoot().setOnClickListener(v-&gt;&#123;</span><br><span class="line">     list.get(last).setChecked(<span class="literal">false</span>);</span><br><span class="line">     list.get(pos).setChecked(<span class="literal">true</span>);</span><br><span class="line">     notifyItemChanged(last);</span><br><span class="line">     notifyItemChanged(pos);</span><br><span class="line">     last = pos;</span><br><span class="line">     <span class="keyword">if</span>(onClick!=<span class="literal">null</span>)&#123;</span><br><span class="line">         onClick.run();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(bean.isChecked())&#123;</span><br><span class="line">    binding.getRoot().setBackgroundColor(<span class="number">0xFFCCCCCC</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    binding.getRoot().setBackgroundColor(<span class="number">0xFFFFFFFF</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完整适配器代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseViewHolder;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ItemServeTypeBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Serve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServeTypeAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&lt;Serve.RowsBean, ItemServeTypeBinding&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">onClick</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOnClick</span><span class="params">(Runnable onClick)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.onClick = onClick;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ServeTypeAdapter</span><span class="params">(Context context, List&lt;Serve.RowsBean&gt; list)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(context, list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BaseViewHolder&lt;Serve.RowsBean, ItemServeTypeBinding&gt; onCreateViewHolder(<span class="meta">@NonNull</span> ViewGroup parent, <span class="type">int</span> viewType) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServeViewHolder</span>(ItemServeTypeBinding.inflate(LayoutInflater.from(context), parent, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ServeViewHolder</span> <span class="keyword">extends</span> <span class="title class_">BaseViewHolder</span>&lt;Serve.RowsBean, ItemServeTypeBinding&gt;&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ServeViewHolder</span><span class="params">(ItemServeTypeBinding binding)</span>&#123;</span><br><span class="line">            <span class="built_in">super</span>(binding);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(<span class="type">int</span> pos, Serve.RowsBean bean)</span> &#123;</span><br><span class="line"></span><br><span class="line">            binding.title.setText(bean.getServiceType());</span><br><span class="line"></span><br><span class="line">            binding.getRoot().setOnClickListener(v-&gt;&#123;</span><br><span class="line">                list.get(last).setChecked(<span class="literal">false</span>);</span><br><span class="line">                list.get(pos).setChecked(<span class="literal">true</span>);</span><br><span class="line">                notifyItemChanged(last);</span><br><span class="line">                notifyItemChanged(pos);</span><br><span class="line">                last = pos;</span><br><span class="line">                <span class="keyword">if</span>(onClick!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    onClick.run();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(bean.isChecked())&#123;</span><br><span class="line">                binding.getRoot().setBackgroundColor(<span class="number">0xFFCCCCCC</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                binding.getRoot().setBackgroundColor(<span class="number">0xFFFFFFFF</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="全部服务Fragment使用适配器"><a href="#全部服务Fragment使用适配器" class="headerlink" title="全部服务Fragment使用适配器"></a>全部服务Fragment使用适配器</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, List&lt;Serve.RowsBean&gt;&gt; serves = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">List&lt;Serve.RowsBean&gt; types = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"> serves.put(<span class="string">&quot;全部服务&quot;</span>, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line"></span><br><span class="line">Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Serve</span>.RowsBean();</span><br><span class="line">row.setServiceType(<span class="string">&quot;全部服务&quot;</span>);</span><br><span class="line">row.setChecked(<span class="literal">true</span>);</span><br><span class="line">types.add(row);</span><br><span class="line"></span><br><span class="line"><span class="type">ServeTypeAdapter</span> <span class="variable">serveTypeAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeTypeAdapter</span>(requireActivity(), types);</span><br><span class="line">binding.selectorRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(requireActivity(), DividerItemDecoration.VERTICAL));</span><br><span class="line">binding.selectorRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(requireActivity(), RecyclerView.VERTICAL,<span class="literal">false</span>));</span><br><span class="line">binding.selectorRv.setAdapter(serveTypeAdapter);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">ServeAdapter</span> <span class="variable">serveAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">binding.serveRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">3</span>));</span><br><span class="line">binding.serveRv.setAdapter(serveAdapter);</span><br><span class="line"></span><br><span class="line">serveTypeAdapter.setOnClick(()-&gt;&#123;</span><br><span class="line">    serveAdapter.setData(serves.get(types.get(serveTypeAdapter.getLast()).getServiceType()));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">OKHttps.get(<span class="string">&quot;/prod-api/api/service/list&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Serve&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Serve bean)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isAdded()) &#123;</span><br><span class="line">            List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bean.getRows());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;temps.size();i++) &#123;</span><br><span class="line">                Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> temps.get(i);</span><br><span class="line">                <span class="keyword">if</span> (serves.get(row.getServiceType()) == <span class="literal">null</span>) &#123;</span><br><span class="line">                    serves.put(row.getServiceType(), <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">                &#125;</span><br><span class="line">                serves.get(row.getServiceType()).add(row);</span><br><span class="line">                serves.get(<span class="string">&quot;全部服务&quot;</span>).add(row);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(String key:serves.keySet())&#123;</span><br><span class="line">                Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> serves.get(key).get(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;全部服务&quot;</span>.equals(key))&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                types.add(row);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            runOnUi(() -&gt; &#123;</span><br><span class="line">                serveAdapter.setData(temps);</span><br><span class="line">                serveTypeAdapter.setData(types);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>HashMap里装获取全部服务时手动分类的服务List</p>
<p>另用一个List存放每种服务的bean，这里还得新建一个全部服务的List和相应的bean 操作完之后就可以在网络请求内同步更新两个适配器</p>
<h6 id="搜索实现"><a href="#搜索实现" class="headerlink" title="搜索实现"></a>搜索实现</h6><p>edit监听enter</p>
<blockquote>
<p>这里有个坑点，清理完文本的时候会自动加上一个空格导致再次搜索匹配不上，只要加个trim把输入的前后空格清理一下就可以了</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">binding.searchEt.setOnEditorActionListener((v, actionId, event) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (event.getKeyCode() == KeyEvent.KEYCODE_ENTER) &#123;</span><br><span class="line">                List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (Serve.RowsBean bean : serves.get(<span class="string">&quot;全部服务&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (bean.getServiceName().contains(binding.searchEt.getText().toString().trim())) &#123;</span><br><span class="line">                        temps.add(bean);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                binding.searchEt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">                serveAdapter.setData(temps);</span><br><span class="line">                toast(String.format(<span class="string">&quot;查询到%d条结果&quot;</span>, temps.size()));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h6 id="完整Fragment代码"><a href="#完整Fragment代码" class="headerlink" title="完整Fragment代码"></a>完整Fragment代码</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.view.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.DividerItemDecoration;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.GridLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.LinearLayoutManager;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.ServeAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.adapter.ServeTypeAdapter;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseFragment;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.FragmentServeBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Serve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServeFragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;FragmentServeBinding&gt; &#123;</span><br><span class="line">    HashMap&lt;String, List&lt;Serve.RowsBean&gt;&gt; serves = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    List&lt;Serve.RowsBean&gt; types = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        serves.put(<span class="string">&quot;全部服务&quot;</span>, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line"></span><br><span class="line">        Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Serve</span>.RowsBean();</span><br><span class="line">        row.setServiceType(<span class="string">&quot;全部服务&quot;</span>);</span><br><span class="line">        row.setChecked(<span class="literal">true</span>);</span><br><span class="line">        types.add(row);</span><br><span class="line"></span><br><span class="line">        <span class="type">ServeTypeAdapter</span> <span class="variable">serveTypeAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeTypeAdapter</span>(requireActivity(), types);</span><br><span class="line">        binding.selectorRv.addItemDecoration(<span class="keyword">new</span> <span class="title class_">DividerItemDecoration</span>(requireActivity(), DividerItemDecoration.VERTICAL));</span><br><span class="line">        binding.selectorRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">LinearLayoutManager</span>(requireActivity(), RecyclerView.VERTICAL, <span class="literal">false</span>));</span><br><span class="line">        binding.selectorRv.setAdapter(serveTypeAdapter);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">ServeAdapter</span> <span class="variable">serveAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServeAdapter</span>(requireActivity(), <span class="literal">null</span>);</span><br><span class="line">        binding.serveRv.setLayoutManager(<span class="keyword">new</span> <span class="title class_">GridLayoutManager</span>(requireActivity(), <span class="number">3</span>));</span><br><span class="line">        binding.serveRv.setAdapter(serveAdapter);</span><br><span class="line"></span><br><span class="line">        serveTypeAdapter.setOnClick(() -&gt; &#123;</span><br><span class="line">            serveAdapter.setData(serves.get(types.get(serveTypeAdapter.getLast()).getServiceType()));</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.searchEt.setOnEditorActionListener((v, actionId, event) -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (event.getKeyCode() == KeyEvent.KEYCODE_ENTER) &#123;</span><br><span class="line">                List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (Serve.RowsBean bean : serves.get(<span class="string">&quot;全部服务&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (bean.getServiceName().contains(binding.searchEt.getText().toString().trim())) &#123;</span><br><span class="line">                        temps.add(bean);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                binding.searchEt.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">                serveAdapter.setData(temps);</span><br><span class="line">                toast(String.format(<span class="string">&quot;查询到%d条结果&quot;</span>, temps.size()));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/api/service/list&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Serve&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Serve bean)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isAdded()) &#123;</span><br><span class="line">                    List&lt;Serve.RowsBean&gt; temps = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bean.getRows());</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; temps.size(); i++) &#123;</span><br><span class="line">                        Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> temps.get(i);</span><br><span class="line">                        <span class="keyword">if</span> (serves.get(row.getServiceType()) == <span class="literal">null</span>) &#123;</span><br><span class="line">                            serves.put(row.getServiceType(), <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">                        &#125;</span><br><span class="line">                        serves.get(row.getServiceType()).add(row);</span><br><span class="line">                        serves.get(<span class="string">&quot;全部服务&quot;</span>).add(row);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span> (String key : serves.keySet()) &#123;</span><br><span class="line">                        Serve.<span class="type">RowsBean</span> <span class="variable">row</span> <span class="operator">=</span> serves.get(key).get(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">if</span> (<span class="string">&quot;全部服务&quot;</span>.equals(key)) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        types.add(row);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    runOnUi(() -&gt; &#123;</span><br><span class="line">                        serveAdapter.setData(temps);</span><br><span class="line">                        serveTypeAdapter.setData(types);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="个人中心Fragment"><a href="#个人中心Fragment" class="headerlink" title="个人中心Fragment"></a>个人中心Fragment</h4><h5 id="布局-5"><a href="#布局-5" class="headerlink" title="布局"></a>布局</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#eeeeee&quot;</span></span><br><span class="line"></span><br><span class="line">    &gt;</span><br><span class="line">    &lt;androidx.cardview.widget.CardView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;16dp&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;#fff&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        &gt;</span><br><span class="line">        &lt;RelativeLayout</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span>&gt;</span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=<span class="string">&quot;64dp&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;64dp&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/head&quot;</span></span><br><span class="line">                android:scaleType=<span class="string">&quot;fitXY&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@mipmap/icon&quot;</span></span><br><span class="line">                android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:maxLines=<span class="string">&quot;1&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;22sp&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#000&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/nickName&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;未登录&quot;</span></span><br><span class="line">                android:layout_marginStart=<span class="string">&quot;80dp&quot;</span></span><br><span class="line">                android:layout_centerVertical=<span class="string">&quot;true&quot;</span></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=<span class="string">&quot;128dp&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;64dp&quot;</span></span><br><span class="line">                android:layout_alignParentEnd=<span class="string">&quot;true&quot;</span></span><br><span class="line">                android:scaleType=<span class="string">&quot;fitXY&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/balance_bg&quot;</span></span><br><span class="line">                android:src=<span class="string">&quot;@drawable/balance_bg&quot;</span></span><br><span class="line">                android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=<span class="string">&quot;128dp&quot;</span></span><br><span class="line">                android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">                android:maxLines=<span class="string">&quot;1&quot;</span></span><br><span class="line">                android:text=<span class="string">&quot;未登录&quot;</span></span><br><span class="line">                android:gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">                android:ellipsize=<span class="string">&quot;end&quot;</span></span><br><span class="line">                android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">                android:textColor=<span class="string">&quot;#fff&quot;</span></span><br><span class="line">                android:id=<span class="string">&quot;@+id/balance&quot;</span></span><br><span class="line">                android:layout_alignEnd=<span class="string">&quot;@+id/balance_bg&quot;</span></span><br><span class="line">                android:layout_centerVertical=<span class="string">&quot;true&quot;</span></span><br><span class="line">                /&gt;</span><br><span class="line">        &lt;/RelativeLayout&gt;</span><br><span class="line">    &lt;/androidx.cardview.widget.CardView&gt;</span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        android:clickable=<span class="string">&quot;true&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:strokeColor=<span class="string">&quot;#000&quot;</span></span><br><span class="line">        app:strokeWidth=<span class="string">&quot;2dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span>&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:drawableRight=<span class="string">&quot;@drawable/ic_enter&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/perMsg&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;个人信息&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        android:clickable=<span class="string">&quot;true&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:strokeColor=<span class="string">&quot;#000&quot;</span></span><br><span class="line">        app:strokeWidth=<span class="string">&quot;2dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span>&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:drawableRight=<span class="string">&quot;@drawable/ic_enter&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/orderList&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;订单列表&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:strokeColor=<span class="string">&quot;#000&quot;</span></span><br><span class="line">        android:clickable=<span class="string">&quot;true&quot;</span></span><br><span class="line">        app:strokeWidth=<span class="string">&quot;2dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span>&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:drawableRight=<span class="string">&quot;@drawable/ic_enter&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/pwdUpdate&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;修改密码&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line">    &lt;com.google.android.material.card.MaterialCardView</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:cardCornerRadius=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        app:strokeColor=<span class="string">&quot;#000&quot;</span></span><br><span class="line">        android:clickable=<span class="string">&quot;true&quot;</span></span><br><span class="line">        app:strokeWidth=<span class="string">&quot;2dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;50dp&quot;</span>&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">            android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">            android:layout_marginHorizontal=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">            android:layout_gravity=<span class="string">&quot;center&quot;</span></span><br><span class="line">            android:drawableRight=<span class="string">&quot;@drawable/ic_enter&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/feedback&quot;</span></span><br><span class="line">            android:text=<span class="string">&quot;意见反馈&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.card.MaterialCardView&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;60dp&quot;</span></span><br><span class="line">        android:layout_marginHorizontal=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;登录&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;20sp&quot;</span></span><br><span class="line">        android:id=<span class="string">&quot;@+id/switchStatus&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>主要是按钮边框通过MaterialCardView实现</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220926215706724-916551757.png" alt="效果"></p>
<h5 id="功能-3"><a href="#功能-3" class="headerlink" title="功能"></a>功能</h5><p>首先页面需要判断是否登录，登录了则应该通过TOKEN获取到个人信息显示到首页</p>
<p>因为更新个人信息后会返回到fragment，所以需要在页面onResume方法中获取个人信息以实现实时更新请求</p>
<h6 id="登录注册"><a href="#登录注册" class="headerlink" title="登录注册"></a>登录注册</h6><p>通过TOKEN_VAL判断是否登录，进入页面时先从SP中重新赋值TOKEN判断是否登录，同理此处在onResume中获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        TOKEN_VAL = getSP(TOKEN);</span><br><span class="line">        isLogin = !TextUtils.isEmpty(TOKEN_VAL.trim());</span><br><span class="line">        <span class="keyword">if</span>(!isLogin)&#123;</span><br><span class="line">            toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这里准备编写一个登录注册的页面，记得新建Activity后一定要在清单中确认添加了相应节点。可以一开始就确认好预计要使用的Activity，一口气建好并添加。以及结合限选的主题时记得检查清单文件有没有合并避免无法打开限选主题的界面</p>
<p>登录注册的界面可以提前写好多个输入框，这样可以使登录，注册，修改密码使用一个界面完成。</p>
<p>这里因为注册需要用户名，密码，电话号码和输入性别。所以这个页面需要多个输入框和一个单选框 </p>
<p>一个tv用于切换注册登录，一个按钮用于提交</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeWidth</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/eta&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;用户名&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeWidth</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/etb&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;密码&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeWidth</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/etc&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;重复密码&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeWidth</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:strokeColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;phone&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/etd&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;电话号码&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span><span class="tag">&lt;<span class="name">com.google.android.material.card.MaterialCardView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:strokeWidth</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:strokeColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:cardCornerRadius</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/ete&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">&quot;重复密码&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.card.MaterialCardView</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/sexSelector&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;性别&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/male&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;男&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/female&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;女&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;注册账号&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/colorPrimaryDark&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/registerTip&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;登录&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/todo&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>编写LoginActivity代码 为了区别登录注册两种状态和重置密码的状态，通过重置密码跳转时会传一个布尔值标识重置密码。否则则是默认登录界面，于是PerFragment个人中心暂时像这样子 注意token有过期的可能，onResume获取个人信息的时候应注意token过期，过期视为未登录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerFragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;FragmentPerBinding&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> isLogin;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.pwdUpdate.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(requireActivity(), LoginActivity.class);</span><br><span class="line">            intent.putExtra(<span class="string">&quot;isResetPwd&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            requireActivity().startActivity(intent);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateView</span><span class="params">()</span>&#123;</span><br><span class="line">        binding.switchStatus.setText(isLogin?<span class="string">&quot;退出&quot;</span>:<span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        binding.switchStatus.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(!isLogin)&#123;</span><br><span class="line">                jump(LoginActivity.class);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                TOKEN_VAL = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                setSp(TOKEN,TOKEN_VAL);</span><br><span class="line">                updateView();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 获取个人信息</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        TOKEN_VAL = getSP(TOKEN);</span><br><span class="line">        isLogin = !TextUtils.isEmpty(TOKEN_VAL.trim());</span><br><span class="line">        updateView();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>接下来实现登录界面的三种状态，先根据传入和点击tip tv切换页面状态再完善代码实现,因为id简朴的用了字典序，所以最好在注释内简单说明一下哪些ed的类型，默认显示哪些</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        * ea,ee common</span></span><br><span class="line"><span class="comment">        * eb,ec pwd</span></span><br><span class="line"><span class="comment">        * ed phone</span></span><br><span class="line"><span class="comment">        * default ea,eb</span></span><br><span class="line"><span class="comment">        * */</span></span><br></pre></td></tr></table></figure>

<p>​                        封装批量控制编辑框显示，内容判空的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(EditText... et)</span>&#123;</span><br><span class="line">       <span class="keyword">for</span>(EditText e:et)&#123;</span><br><span class="line">           <span class="keyword">if</span>(TextUtils.isEmpty(e.getText().toString().trim()))&#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">vis</span><span class="params">(View... views)</span>&#123;</span><br><span class="line">       <span class="keyword">for</span>(View v:views)&#123;</span><br><span class="line">           <span class="keyword">if</span>(v <span class="keyword">instanceof</span> EditText)&#123;</span><br><span class="line">               ((View)v.getParent()).setVisibility(View.VISIBLE);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span>&#123;</span><br><span class="line">               v.setVisibility(View.VISIBLE);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">gone</span><span class="params">(View... views)</span>&#123;</span><br><span class="line">       <span class="keyword">for</span>(View v:views)&#123;</span><br><span class="line">           <span class="keyword">if</span>(v <span class="keyword">instanceof</span> EditText)&#123;</span><br><span class="line">               ((View)v.getParent()).setVisibility(View.GONE);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span>&#123;</span><br><span class="line">               v.setVisibility(View.GONE);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​      测试登录，注册和修改密码接口。新建通用返回结果pojo，token是为了在返回token的登录接口的返回共同使用而加上的</p>
<p>没有token的返回直接无视这个属性即可</p>
<h6 id="完整LoginActivity"><a href="#完整LoginActivity" class="headerlink" title="完整LoginActivity"></a>完整LoginActivity</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityLoginBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Msg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityLoginBinding&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isRegister</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isResetPwd</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v -&gt; finish());</span><br><span class="line"></span><br><span class="line">        isResetPwd = getIntent().getBooleanExtra(<span class="string">&quot;isResetPwd&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (isResetPwd) &#123;</span><br><span class="line">            binding.toolbar.title.setText(<span class="string">&quot;修改密码&quot;</span>);</span><br><span class="line">            binding.eta.setHint(<span class="string">&quot;输入旧密码&quot;</span>);</span><br><span class="line">            binding.ete.setHint(<span class="string">&quot;输入新密码&quot;</span>);</span><br><span class="line">            binding.todo.setText(<span class="string">&quot;修改密码&quot;</span>);</span><br><span class="line">            vis(binding.ete);</span><br><span class="line">            gone(binding.etb, binding.registerTip);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        updateView();</span><br><span class="line"></span><br><span class="line">        binding.registerTip.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            isRegister = !isRegister;</span><br><span class="line">            updateView();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.todo.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (isResetPwd) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isEmpty(binding.eta, binding.ete)) &#123;</span><br><span class="line">                    <span class="comment">// 重置密码</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">oldPwd</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">newPwd</span> <span class="operator">=</span> binding.ete.getText().toString().trim();</span><br><span class="line">                    HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                    map.put(<span class="string">&quot;newPassword&quot;</span>, newPwd);</span><br><span class="line">                    map.put(<span class="string">&quot;oldPassword&quot;</span>, oldPwd);</span><br><span class="line">                    OKHttps.put(<span class="string">&quot;/prod-api/api/common/user/resetPwd&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                            toast(bean.getMsg());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isRegister) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (isEmpty(binding.eta, binding.etb, binding.etc, binding.etd)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> binding.etd.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span> (phone.length() != <span class="number">11</span>) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;手机号码位数不正确&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> binding.etb.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">passwordRepeat</span> <span class="operator">=</span> binding.etc.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span> (!password.equals(passwordRepeat)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;两次输入密码不一致&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> binding.male.isChecked() ? <span class="string">&quot;0&quot;</span> : <span class="string">&quot;1&quot;</span>;</span><br><span class="line">                HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                map.put(<span class="string">&quot;nickName&quot;</span>, userName);</span><br><span class="line">                map.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">                map.put(<span class="string">&quot;phonenumber&quot;</span>, phone);</span><br><span class="line">                map.put(<span class="string">&quot;sex&quot;</span>, sex);</span><br><span class="line">                OKHttps.post(<span class="string">&quot;/prod-api/api/register&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                        toast(bean.getMsg());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isEmpty(binding.eta, binding.etb)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> binding.etb.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line"></span><br><span class="line">                HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">&quot;username&quot;</span>, userName);</span><br><span class="line">                map.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">                OKHttps.post(<span class="string">&quot;/prod-api/api/login&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                        toast(bean.getMsg());</span><br><span class="line">                        <span class="keyword">if</span> (bean.getCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                            Const.TOKEN_VAL = bean.getToken();</span><br><span class="line">                            setSp(Const.TOKEN, Const.TOKEN_VAL);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isResetPwd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isRegister) &#123;</span><br><span class="line">                vis(binding.etc, binding.etd, binding.sexSelector);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                gone(binding.etc, binding.etd, binding.sexSelector);</span><br><span class="line">            &#125;</span><br><span class="line">            binding.toolbar.title.setText(isRegister ? <span class="string">&quot;注册&quot;</span> : <span class="string">&quot;登录&quot;</span>);</span><br><span class="line">            binding.registerTip.setText(isRegister ? <span class="string">&quot;登录账号&quot;</span> : <span class="string">&quot;注册账号&quot;</span>);</span><br><span class="line">            binding.todo.setText(isRegister ? <span class="string">&quot;注册&quot;</span> : <span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(EditText... et)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (EditText e : et) &#123;</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.isEmpty(e.getText().toString().trim())) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">vis</span><span class="params">(View... views)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (View v : views) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v <span class="keyword">instanceof</span> EditText) &#123;</span><br><span class="line">                ((View) v.getParent()).setVisibility(View.VISIBLE);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                v.setVisibility(View.VISIBLE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">gone</span><span class="params">(View... views)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (View v : views) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v <span class="keyword">instanceof</span> EditText) &#123;</span><br><span class="line">                ((View) v.getParent()).setVisibility(View.GONE);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                v.setVisibility(View.GONE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927015845309-45143034.png" alt="默认返回结果pojo"></p>
<p>  编写完页面切换逻辑加上请求即可，注意登录后应该关闭当前activity保存token</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.practice0924.page;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Const;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityLoginBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Msg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityLoginBinding&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isRegister</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isResetPwd</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v -&gt; finish());</span><br><span class="line"></span><br><span class="line">        isResetPwd = getIntent().getBooleanExtra(<span class="string">&quot;isResetPwd&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (isResetPwd) &#123;</span><br><span class="line">            binding.toolbar.title.setText(<span class="string">&quot;修改密码&quot;</span>);</span><br><span class="line">            binding.eta.setHint(<span class="string">&quot;输入旧密码&quot;</span>);</span><br><span class="line">            binding.ete.setHint(<span class="string">&quot;输入新密码&quot;</span>);</span><br><span class="line">            binding.todo.setText(<span class="string">&quot;修改密码&quot;</span>);</span><br><span class="line">            vis(binding.ete);</span><br><span class="line">            gone(binding.etb, binding.registerTip);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        updateView();</span><br><span class="line"></span><br><span class="line">        binding.registerTip.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            isRegister = !isRegister;</span><br><span class="line">            updateView();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.todo.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (isResetPwd) &#123;</span><br><span class="line">                 <span class="keyword">if</span> (!isEmpty(binding.eta, binding.ete)) &#123;</span><br><span class="line">                    <span class="comment">// 重置密码</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">oldPwd</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">newPwd</span> <span class="operator">=</span> binding.ete.getText().toString().trim();</span><br><span class="line">                    HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                    map.put(<span class="string">&quot;newPassword&quot;</span>, newPwd);</span><br><span class="line">                    map.put(<span class="string">&quot;oldPassword&quot;</span>, oldPwd);</span><br><span class="line">                    OKHttps.put(<span class="string">&quot;/prod-api/api/common/user/resetPwd&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                            toast(bean.getMsg());</span><br><span class="line">                            <span class="keyword">if</span>(bean.getCode()==<span class="number">200</span>)&#123;</span><br><span class="line">                                TOKEN_VAL = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                                setSp(TOKEN,TOKEN_VAL);</span><br><span class="line">                                finish();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isRegister) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (isEmpty(binding.eta, binding.etb, binding.etc, binding.etd)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> binding.etd.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span> (phone.length() != <span class="number">11</span>) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;手机号码位数不正确&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> binding.etb.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">passwordRepeat</span> <span class="operator">=</span> binding.etc.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span> (!password.equals(passwordRepeat)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;两次输入密码不一致&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> binding.male.isChecked() ? <span class="string">&quot;0&quot;</span> : <span class="string">&quot;1&quot;</span>;</span><br><span class="line">                HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                map.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">                map.put(<span class="string">&quot;phonenumber&quot;</span>, phone);</span><br><span class="line">                map.put(<span class="string">&quot;sex&quot;</span>, sex);</span><br><span class="line">                OKHttps.post(<span class="string">&quot;/prod-api/api/register&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                        toast(bean.getMsg());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isEmpty(binding.eta, binding.etb)) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;未输入完成内容&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> binding.etb.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> binding.eta.getText().toString().trim();</span><br><span class="line"></span><br><span class="line">                HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">&quot;username&quot;</span>, userName);</span><br><span class="line">                map.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">                OKHttps.post(<span class="string">&quot;/prod-api/api/login&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                        toast(bean.getMsg());</span><br><span class="line">                        <span class="keyword">if</span> (bean.getCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                            Const.TOKEN_VAL = bean.getToken();</span><br><span class="line">                            setSp(Const.TOKEN, Const.TOKEN_VAL);</span><br><span class="line">                            toast(<span class="string">&quot;登陆成功&quot;</span>);</span><br><span class="line">                            finish();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isResetPwd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isRegister) &#123;</span><br><span class="line">                vis(binding.etc, binding.etd, binding.sexSelector);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                gone(binding.etc, binding.etd, binding.sexSelector);</span><br><span class="line">            &#125;</span><br><span class="line">            binding.toolbar.title.setText(isRegister ? <span class="string">&quot;注册&quot;</span> : <span class="string">&quot;登录&quot;</span>);</span><br><span class="line">            binding.registerTip.setText(isRegister ? <span class="string">&quot;登录账号&quot;</span> : <span class="string">&quot;注册账号&quot;</span>);</span><br><span class="line">            binding.todo.setText(isRegister ? <span class="string">&quot;注册&quot;</span> : <span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(EditText... et)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (EditText e : et) &#123;</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.isEmpty(e.getText().toString().trim())) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">vis</span><span class="params">(View... views)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (View v : views) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v <span class="keyword">instanceof</span> EditText) &#123;</span><br><span class="line">                ((View) v.getParent()).setVisibility(View.VISIBLE);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                v.setVisibility(View.VISIBLE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">gone</span><span class="params">(View... views)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (View v : views) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v <span class="keyword">instanceof</span> EditText) &#123;</span><br><span class="line">                ((View) v.getParent()).setVisibility(View.GONE);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                v.setVisibility(View.GONE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
<h6 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h6><p>因为这里文件上传接口测试失败，直接显示一个弹窗表示可以选择相册图片或拍摄就可以了</p>
<p>先为每一个按钮添加点击事件，且判断登录状态下才能打开</p>
<p>此处回到fragment会测试获取用户信息</p>
<p>测试接口生成bean然后onResume下通过token获取用户信息 顺便为所有按钮添加一个跳转页面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerFragment</span> <span class="keyword">extends</span> <span class="title class_">BaseFragment</span>&lt;FragmentPerBinding&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> isLogin;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.perMsg.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(isLogin)&#123;</span><br><span class="line">                jump(InfoActivity.class);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        binding.orderList.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(isLogin)&#123;</span><br><span class="line">                jump(OrderListActivity.class);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        binding.feedback.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(isLogin)&#123;</span><br><span class="line">                jump(FeedbackActivity.class);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        binding.pwdUpdate.setOnClickListener(v-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(isLogin)&#123;</span><br><span class="line">                <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(requireActivity(), LoginActivity.class);</span><br><span class="line">                intent.putExtra(<span class="string">&quot;isResetPwd&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">                requireActivity().startActivity(intent);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                toast(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateView</span><span class="params">()</span>&#123;</span><br><span class="line">        binding.switchStatus.setText(isLogin?<span class="string">&quot;退出&quot;</span>:<span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        binding.switchStatus.setOnClickListener(v-&gt;&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(!isLogin)&#123;</span><br><span class="line">                jump(LoginActivity.class);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                isLogin = <span class="literal">false</span>;</span><br><span class="line">                TOKEN_VAL = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                toast(<span class="string">&quot;退出登录&quot;</span>);</span><br><span class="line">                setSp(TOKEN,TOKEN_VAL);</span><br><span class="line">                updateView();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(isLogin)&#123;</span><br><span class="line">            OKHttps.get(<span class="string">&quot;/prod-api/api/common/user/getInfo&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;UserInfo&gt;()&#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, UserInfo bean)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(bean.getCode()!=<span class="number">200</span>)&#123;</span><br><span class="line">                        toast(<span class="string">&quot;登陆失败&quot;</span>);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    runOnUi(()-&gt;&#123;</span><br><span class="line">                        UserInfo.<span class="type">UserBean</span> <span class="variable">user</span> <span class="operator">=</span> bean.getUser();</span><br><span class="line">                        binding.balance.setText(<span class="string">&quot;￥&quot;</span>+user.getBalance());</span><br><span class="line">                        <span class="keyword">if</span>(user.getAvatar().contains(<span class="string">&quot;/profile/&quot;</span>))&#123;</span><br><span class="line">                            user.setAvatar(URL+user.getAvatar());</span><br><span class="line">                        &#125;</span><br><span class="line">                        Glide.with(requireActivity()).load(user.getAvatar()).into(binding.head);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">nickName</span> <span class="operator">=</span> user.getNickName();</span><br><span class="line">                        <span class="keyword">if</span>(TextUtils.isEmpty(nickName.trim()))&#123;</span><br><span class="line">                            nickName = user.getUserName();</span><br><span class="line">                        &#125;</span><br><span class="line">                        binding.nickName.setText(nickName);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            binding.balance.setText(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">            binding.head.setImageResource(R.mipmap.icon);</span><br><span class="line">            binding.nickName.setText(<span class="string">&quot;未登录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResume</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onResume();</span><br><span class="line">        TOKEN_VAL = getSP(TOKEN);</span><br><span class="line">        isLogin = !TextUtils.isEmpty(TOKEN_VAL.trim());</span><br><span class="line">        updateView();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后编写个人信息的界面布局</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/headSetUp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?android:selectableItemBackground&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/head&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">&quot;fitXY&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/icon&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;设置头像&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?android:selectableItemBackground&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/nickName&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;256dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;昵称，默认被设置为用户名&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;昵称&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?android:selectableItemBackground&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/phone&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;256dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:hint</span>=<span class="string">&quot;11位手机号码&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:inputType</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;手机号码&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?android:selectableItemBackground&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/male&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;男&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:id</span>=<span class="string">&quot;@+id/female&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:text</span>=<span class="string">&quot;女&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;性别&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?android:selectableItemBackground&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/idCard&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentEnd</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;44************2117&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_margin</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:maxLines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;证件号码&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;1dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#ccc&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/update&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginHorizontal</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;修改&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="InfoActivity"><a href="#InfoActivity" class="headerlink" title="InfoActivity"></a>InfoActivity</h6><p>进入Activity先获取信息设置上去，然后监听按钮点击判空输入，提交修改 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.R;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityInfoBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Msg;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.UserInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.example.practice0924.base.Const.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InfoActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityInfoBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;个人信息&quot;</span>);</span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v -&gt; finish());</span><br><span class="line"></span><br><span class="line">        OKHttps.get(<span class="string">&quot;/prod-api/api/common/user/getInfo&quot;</span>, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;UserInfo&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, UserInfo bean)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bean.getCode() != <span class="number">200</span>) &#123;</span><br><span class="line">                    toast(<span class="string">&quot;登陆失败&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                runOnUiThread(() -&gt; &#123;</span><br><span class="line">                    UserInfo.<span class="type">UserBean</span> <span class="variable">user</span> <span class="operator">=</span> bean.getUser();</span><br><span class="line">                    <span class="keyword">if</span> (user.getAvatar().contains(<span class="string">&quot;/profile/&quot;</span>)) &#123;</span><br><span class="line">                        user.setAvatar(URL + user.getAvatar());</span><br><span class="line">                    &#125;</span><br><span class="line">                    Glide.with(InfoActivity.<span class="built_in">this</span>).load(user.getAvatar()).into(binding.head);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">nickName</span> <span class="operator">=</span> user.getNickName();</span><br><span class="line">                    <span class="keyword">if</span> (TextUtils.isEmpty(nickName.trim())) &#123;</span><br><span class="line">                        nickName = user.getUserName();</span><br><span class="line">                    &#125;</span><br><span class="line">                    binding.nickName.setText(nickName);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> user.getPhonenumber();</span><br><span class="line">                    binding.phone.setText(phone);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">idCard</span> <span class="operator">=</span> user.getIdCard();</span><br><span class="line">                    <span class="keyword">if</span> (idCard.length() &gt; <span class="number">6</span>) &#123;</span><br><span class="line">                        idCard = idCard.substring(<span class="number">0</span>, <span class="number">2</span>) + <span class="string">&quot;************&quot;</span> + idCard.substring(idCard.length() - <span class="number">4</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    binding.idCard.setText(idCard);</span><br><span class="line">                    <span class="type">boolean</span> <span class="variable">male</span> <span class="operator">=</span> user.getSex().equals(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (male) &#123;</span><br><span class="line">                        binding.male.setChecked(<span class="literal">true</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        binding.female.setChecked(<span class="literal">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        binding.headSetUp.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(InfoActivity.<span class="built_in">this</span>)</span><br><span class="line">                    .setTitle(<span class="string">&quot;上传图片&quot;</span>)</span><br><span class="line">                    .setNegativeButton(<span class="string">&quot;相册选择&quot;</span>, <span class="literal">null</span>)</span><br><span class="line">                    .setPositiveButton(<span class="string">&quot;相机拍摄&quot;</span>, <span class="literal">null</span>)</span><br><span class="line">                    .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="literal">null</span>)</span><br><span class="line">                    .create().show();</span><br><span class="line">        &#125;);</span><br><span class="line">        binding.update.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (!isEmpty(binding.nickName, binding.phone)) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">nickName</span> <span class="operator">=</span> binding.nickName.getText().toString();</span><br><span class="line">                <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> binding.phone.getText().toString();</span><br><span class="line">                <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> binding.female.isChecked() ? <span class="string">&quot;1&quot;</span> : <span class="string">&quot;0&quot;</span>;</span><br><span class="line">                HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                map.put(<span class="string">&quot;nickName&quot;</span>, nickName);</span><br><span class="line">                map.put(<span class="string">&quot;phonenumber&quot;</span>, phone);</span><br><span class="line">                map.put(<span class="string">&quot;sex&quot;</span>, sex);</span><br><span class="line">                OKHttps.put(<span class="string">&quot;/prod-api/api/common/user&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                        toast(bean.getMsg());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                toast(<span class="string">&quot;未输入完成&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(EditText... et)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (EditText e : et) &#123;</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.isEmpty(e.getText().toString().trim())) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="提交反馈"><a href="#提交反馈" class="headerlink" title="提交反馈"></a>提交反馈</h6><p>用一个TextInputLayout做一个字数限制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:app=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    android:orientation=<span class="string">&quot;vertical&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:background=<span class="string">&quot;#eeeeee&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;include</span><br><span class="line">        android:id=<span class="string">&quot;@+id/toolbar&quot;</span></span><br><span class="line">        layout=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span><br><span class="line">    &lt;com.google.android.material.textfield.TextInputLayout</span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;150dp&quot;</span></span><br><span class="line">        app:counterEnabled=<span class="string">&quot;true&quot;</span></span><br><span class="line">        android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">        style=<span class="string">&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;</span></span><br><span class="line">        app:counterMaxLength=<span class="string">&quot;150&quot;</span>&gt;</span><br><span class="line">        &lt;com.google.android.material.textfield.TextInputEditText</span><br><span class="line">            android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">            android:maxLength=<span class="string">&quot;150&quot;</span></span><br><span class="line">            android:gravity=<span class="string">&quot;start&quot;</span></span><br><span class="line">            android:id=<span class="string">&quot;@+id/feedback&quot;</span></span><br><span class="line">            android:hint=<span class="string">&quot;意见反馈&quot;</span></span><br><span class="line">            /&gt;</span><br><span class="line">    &lt;/com.google.android.material.textfield.TextInputLayout&gt;</span><br><span class="line">&lt;Button</span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:layout_margin=<span class="string">&quot;8dp&quot;</span></span><br><span class="line">    android:text=<span class="string">&quot;提交&quot;</span></span><br><span class="line">    android:id=<span class="string">&quot;@+id/submit&quot;</span>/&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>直接监听按钮发个post请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.BaseActivity;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.Callbacks;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.base.OKHttps;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.databinding.ActivityFeedbackBinding;</span><br><span class="line"><span class="keyword">import</span> com.example.practice0924.pojo.Msg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeedbackActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span>&lt;ActivityFeedbackBinding&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        binding.toolbar.title.setText(<span class="string">&quot;意见反馈&quot;</span>);</span><br><span class="line">        binding.toolbar.back.setVisibility(View.VISIBLE);</span><br><span class="line">        binding.toolbar.back.setOnClickListener(v-&gt;finish());</span><br><span class="line">        binding.submit.setOnClickListener(v -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">inp</span> <span class="operator">=</span> binding.feedback.getText().toString();</span><br><span class="line">            <span class="keyword">if</span>(TextUtils.isEmpty(inp.trim()))&#123;</span><br><span class="line">                toast(<span class="string">&quot;输入内容为空&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">           <span class="number">1</span></span><br><span class="line">            HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;意见反馈&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;content&quot;</span>, inp);</span><br><span class="line">            OKHttps.post(<span class="string">&quot;/prod-api/api/common/feedback&quot;</span>, map, <span class="keyword">new</span> <span class="title class_">Callbacks</span>&lt;Msg&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">getRes</span><span class="params">(String res, Msg bean)</span> &#123;</span><br><span class="line">                    toast(bean.getMsg());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="订单列表"><a href="#订单列表" class="headerlink" title="订单列表"></a>订单列表</h6><p>因为没打算做智慧巴士啥的，这里直接显示一个包含两个item(已支付，未支付)的tabLayout敷衍一下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;#eeeeee&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/toolbar&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tabLayout&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;56dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:tabMode</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;已支付&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabItem</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;未支付&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.google.android.material.tabs.TabLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="打包发布release"><a href="#打包发布release" class="headerlink" title="打包发布release"></a>打包发布release</h3><p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927205506757-1720314318.png" alt="选择打包"></p>
<p>-&gt; Build -&gt; Generate Signed Bundle &#x2F; APK</p>
<p>选择打包APK</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927205548917-1780890009.png" alt="选择打包APK"></p>
<p>选择CreateNew，选择存储位置，密码，和随便填一个校验</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927205745438-1122198739.png" alt="相关配置"></p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927205830876-461280326.png" alt="返回页面"></p>
<p>然后点Next一键打包，选择release并且勾选两个签名方案</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927205908235-1440336921.png" alt="选择"></p>
<p>打包release包耗时比较久，至少预留半小时打包和测试</p>
<p>release&#x2F;app-release.apk</p>
<p>提交前记得查看打包命名要求，这里默认改成SmartCity.apk</p>
<p><img src="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927210207731-315741837.png" alt="成果物"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://xqher.gitee.io">虚青海</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://xqher.gitee.io/post/c1668d50ac8a/">https://xqher.gitee.io/post/c1668d50ac8a/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://xqher.gitee.io" target="_blank"> 虚青海的博客 </a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">开发记录</a></div><div class="post_share"><div class="social-share" data-image="https://img2022.cnblogs.com/blog/1674552/202209/1674552-20220927211814642-994800873.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/8d4e25576333/" title="KMP学习笔记"><img class="cover" src="https://img2022.cnblogs.com/blog/1674552/202210/1674552-20221004111341363-1758232878.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">KMP学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/post/3ac0a3d1be26/" title="CS速成笔记"><img class="cover" src="https://img2022.cnblogs.com/blog/1674552/202208/1674552-20220809214409822-534956115.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CS速成笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%BA%E6%85%A7%E5%9F%8E%E5%B8%82%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95"><span class="toc-number">1.</span> <span class="toc-text">智慧城市开发流程记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AS%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.1.</span> <span class="toc-text">AS常用快捷键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">1.1.1.</span> <span class="toc-text">代码格式化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.2.</span> <span class="toc-text">打开源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E4%B8%8B%E4%B8%80%E8%A1%8C%E6%8F%92%E5%85%A5%E6%8D%A2%E8%A1%8C"><span class="toc-number">1.1.3.</span> <span class="toc-text">往下一行插入换行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E4%B8%8A%E4%B8%80%E8%A1%8C%E6%8F%92%E5%85%A5%E6%8D%A2%E8%A1%8C"><span class="toc-number">1.1.4.</span> <span class="toc-text">往上一行插入换行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E8%A1%8C%E6%9C%AB-%E5%88%86%E5%8F%B7%E5%90%8E-%E6%B7%BB%E5%8A%A0%E6%8D%A2%E8%A1%8C"><span class="toc-number">1.1.5.</span> <span class="toc-text">在行末(分号后)添加换行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E9%97%B4%E4%B8%8A%E4%B8%8B%E8%B7%B3%E8%BD%AC"><span class="toc-number">1.1.6.</span> <span class="toc-text">方法间上下跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%BD%93%E5%89%8D%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.7.</span> <span class="toc-text">切换当前编辑文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E9%97%B4%E5%B7%A6%E5%8F%B3%E7%A7%BB%E5%8A%A8"><span class="toc-number">1.1.8.</span> <span class="toc-text">字段间左右移动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8A%E4%B8%8B%E6%BB%91%E5%8A%A8"><span class="toc-number">1.1.9.</span> <span class="toc-text">页面上下滑动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%BD%93%E5%89%8D%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.10.</span> <span class="toc-text">复制当前行代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E6%9C%80%E8%BF%91%E6%93%8D%E4%BD%9C%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.11.</span> <span class="toc-text">打开最近操作的文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E8%BE%93%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">1.1.12.</span> <span class="toc-text">快捷输入代码块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%B1%BB%E5%BE%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.1.13.</span> <span class="toc-text">查看当前类待实现接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-number">1.1.14.</span> <span class="toc-text">切换大小写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E8%A1%A5%E5%85%A8%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.15.</span> <span class="toc-text">快速补全代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E7%A7%BB%E5%8A%A8%E4%B8%80%E6%AE%B5%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.16.</span> <span class="toc-text">上下移动一段代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E4%B8%AD%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.17.</span> <span class="toc-text">选中字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E4%B8%AD%E5%A4%9A%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">1.1.18.</span> <span class="toc-text">选中多行代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">1.1.19.</span> <span class="toc-text">重命名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E5%89%8D%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">开发前配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.2.1.</span> <span class="toc-text">新建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEGit"><span class="toc-number">1.2.2.</span> <span class="toc-text">配置Git</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">导入插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-number">1.2.4.</span> <span class="toc-text">引入依赖包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.5.</span> <span class="toc-text">配置清单文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91"><span class="toc-number">1.3.</span> <span class="toc-text">开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E8%BE%85%E5%8A%A9%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%B8%83%E5%B1%80"><span class="toc-number">1.3.1.</span> <span class="toc-text">编写辅助代码，布局</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%E7%9B%B8%E5%85%B3"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">布局相关</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E8%AE%BE%E8%AE%A1%E7%B4%A0%E6%9D%90"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">引入设计素材</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Toolbar"><span class="toc-number">1.3.1.1.2.</span> <span class="toc-text">Toolbar</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB-%E4%B8%8E%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">抽象基类 与工具类</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Const"><span class="toc-number">1.3.1.2.1.</span> <span class="toc-text">Const</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BaseActivity"><span class="toc-number">1.3.1.2.2.</span> <span class="toc-text">BaseActivity</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BaseFragment"><span class="toc-number">1.3.1.2.3.</span> <span class="toc-text">BaseFragment</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BaseViewHolder"><span class="toc-number">1.3.1.2.4.</span> <span class="toc-text">BaseViewHolder</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BaseAdapter"><span class="toc-number">1.3.1.2.5.</span> <span class="toc-text">BaseAdapter</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Callbacks"><span class="toc-number">1.3.1.2.6.</span> <span class="toc-text">Callbacks</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#OKHttps"><span class="toc-number">1.3.1.2.7.</span> <span class="toc-text">OKHttps</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#EmptyActivity"><span class="toc-number">1.3.1.2.8.</span> <span class="toc-text">EmptyActivity</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">样式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%AF%BC%E9%A1%B5"><span class="toc-number">1.3.2.</span> <span class="toc-text">引导页</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%85%E5%8D%95"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">清单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E5%AE%B9%E5%99%A8Activity"><span class="toc-number">1.3.3.</span> <span class="toc-text">主页容器Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80-1"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96Fragment"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">初始化Fragment</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-1"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5Fragment"><span class="toc-number">1.3.4.</span> <span class="toc-text">主页Fragment</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80-2"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E9%97%BB%E6%90%9C%E7%B4%A2"><span class="toc-number">1.3.4.2.1.</span> <span class="toc-text">新闻搜索</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E5%9B%BE"><span class="toc-number">1.3.4.2.2.</span> <span class="toc-text">轮播图</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%88%97%E8%A1%A8"><span class="toc-number">1.3.4.2.3.</span> <span class="toc-text">服务列表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%83%AD%E9%97%A8%E4%B8%BB%E9%A2%98"><span class="toc-number">1.3.4.2.4.</span> <span class="toc-text">热门主题</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E9%97%BB%E5%88%86%E7%B1%BB%E5%92%8C%E5%88%97%E8%A1%A8"><span class="toc-number">1.3.4.2.5.</span> <span class="toc-text">新闻分类和列表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5Fragment-%E5%85%A8%E9%83%A8%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.4.2.6.</span> <span class="toc-text">主页Fragment 全部代码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E9%97%BB%E6%90%9C%E7%B4%A2%E5%AE%8C%E5%96%84"><span class="toc-number">1.3.4.2.7.</span> <span class="toc-text">新闻搜索完善</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E9%97%BBFragment"><span class="toc-number">1.3.5.</span> <span class="toc-text">新闻Fragment</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80-3"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD-1"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E9%97%BB%E6%98%BE%E7%A4%BA"><span class="toc-number">1.3.5.2.1.</span> <span class="toc-text">新闻显示</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E9%97%BB%E6%8E%A8%E8%8D%90"><span class="toc-number">1.3.5.2.2.</span> <span class="toc-text">新闻推荐</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8"><span class="toc-number">1.3.5.2.3.</span> <span class="toc-text">评论列表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA"><span class="toc-number">1.3.5.2.4.</span> <span class="toc-text">评论</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E8%AF%A6%E6%83%85%E9%A1%B5%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.5.2.5.</span> <span class="toc-text">完整详情页代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%83%A8%E6%9C%8D%E5%8A%A1Fragment"><span class="toc-number">1.3.6.</span> <span class="toc-text">全部服务Fragment</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80-4"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD-2"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8D%95%E9%80%89%E9%80%82%E9%85%8D%E5%99%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.6.2.1.</span> <span class="toc-text">单选适配器实现</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%A8%E9%83%A8%E6%9C%8D%E5%8A%A1Fragment%E4%BD%BF%E7%94%A8%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">1.3.6.2.2.</span> <span class="toc-text">全部服务Fragment使用适配器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.6.2.3.</span> <span class="toc-text">搜索实现</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4Fragment%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.6.2.4.</span> <span class="toc-text">完整Fragment代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83Fragment"><span class="toc-number">1.3.7.</span> <span class="toc-text">个人中心Fragment</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B1%80-5"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD-3"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C"><span class="toc-number">1.3.7.2.1.</span> <span class="toc-text">登录注册</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4LoginActivity"><span class="toc-number">1.3.7.2.2.</span> <span class="toc-text">完整LoginActivity</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.7.2.3.</span> <span class="toc-text">个人信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#InfoActivity"><span class="toc-number">1.3.7.2.4.</span> <span class="toc-text">InfoActivity</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E5%8F%8D%E9%A6%88"><span class="toc-number">1.3.7.2.5.</span> <span class="toc-text">提交反馈</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8"><span class="toc-number">1.3.7.2.6.</span> <span class="toc-text">订单列表</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83release"><span class="toc-number">1.4.</span> <span class="toc-text">打包发布release</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By 虚青海</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">这里居然有个友链→<a target="_blank" rel="noopener" href="https://aiepoch.cn/">及境丹青</a>←! <br><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2022099830号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>